<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>在minikube下创建kafka集群 | tonglin0325的个人主页</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在minikube下安装的kafka集群分成4个步骤 1.在mac上安装minikube这里安装的minikube是基于virtualbox的，也就是minikube是运行在virtualbox启动的一个虚拟机中 参考：Mac下安装minikube 2.给zk和kafka创建local persistence volumn参考：Helm 安装Kafka zk和kafka的数据需要落盘，所以需要依赖">
<meta property="og:type" content="article">
<meta property="og:title" content="在minikube下创建kafka集群">
<meta property="og:url" content="http://tonglin0325.github.io/%E5%9C%A8minikube%E4%B8%8B%E5%88%9B%E5%BB%BAkafka%E9%9B%86%E7%BE%A4.html">
<meta property="og:site_name" content="tonglin0325的个人主页">
<meta property="og:description" content="在minikube下安装的kafka集群分成4个步骤 1.在mac上安装minikube这里安装的minikube是基于virtualbox的，也就是minikube是运行在virtualbox启动的一个虚拟机中 参考：Mac下安装minikube 2.给zk和kafka创建local persistence volumn参考：Helm 安装Kafka zk和kafka的数据需要落盘，所以需要依赖">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://tonglin0325.github.io/images/517519-20220714153104124-1134513096.png">
<meta property="og:image" content="http://tonglin0325.github.io/images/517519-20220714173144455-1673378660.png">
<meta property="article:published_time" content="2015-07-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-03-08T13:39:57.523Z">
<meta property="article:author" content="tonglin0325">
<meta property="article:tag" content="k8s">
<meta property="article:tag" content="kafka">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://tonglin0325.github.io/images/517519-20220714153104124-1134513096.png">
  
    <link rel="alternate" href="/atom.xml" title="tonglin0325的个人主页" type="application/atom+xml">
  
  
    <link rel="icon" href="https://tonglin0325.github.io/images/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  
<link rel="stylesheet" href="/css/styles.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-166238833-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5884015902351015"
     crossorigin="anonymous"></script>

<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">主页</a></li>
        
          <li><a class=""
                 href="/archives/">所有文章</a></li>
        
          <li><a class=""
                 target="_blank" rel="noopener" href="http://www.cnblogs.com/tonglin0325/">博客园</a></li>
        
          <li><a class=""
                 target="_blank" rel="noopener" href="https://github.com/tonglin0325">Github</a></li>
        
          <li><a class=""
                 target="_blank" rel="noopener" href="https://www.linkedin.com/in/tonglin0325/">LinkedIn</a></li>
        
        <li>
          <span class="local-search local-search-google local-search-plugin" style="">
  <input type="search" placeholder="站内搜索" id="local-search-input" class="local-search-input-cls" style="">
  <div id="local-search-result" class="local-search-result-cls"></div>
</span>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
    const div = document.getElementById('local-search-result');
    const input = document.getElementById('local-search-input');

    // 点击 input 显示 div
    input.addEventListener('click', function() {
        div.style.display = 'block';
    });

    // 点击 div 之外的地方隐藏 div
    document.addEventListener('click', function(event) {
        if (!div.contains(event.target) && event.target !== div && event.target !== input) {
            div.style.display = 'none';
        }
    });
});
</script>
        </li>
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
// 移动设备侦测
var isMobile = {
  Android: function () {
    return navigator.userAgent.match(/Android/i);
  },
  BlackBerry: function () {
    return navigator.userAgent.match(/BlackBerry/i);
  },
  iOS: function () {
    return navigator.userAgent.match(/iPhone|iPad|iPod/i);
  },
  Opera: function () {
    return navigator.userAgent.match(/Opera Mini/i);
  },
  Windows: function () {
    return navigator.userAgent.match(/IEMobile/i);
  },
  any: function () {
    return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
  }
};

if ($('.local-search').resize() && !isMobile.any()) {
	$.getScript('/js/search.js', function() {
	  searchFunc("/search.json", 'local-search-input', 'local-search-result');
	});
}

// document.addEventListener('DOMContentLoaded', (event) => {
//
//     const input = document.getElementById('.local-search-input');
//     const div = document.getElementById('.local-search-result');
//
//     input.addEventListener('blur', function() {
//         div.style.display = 'none';
//     });
// });
</script>
  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">tonglin0325的个人主页</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-在minikube下创建kafka集群" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      在minikube下创建kafka集群
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/%E5%9C%A8minikube%E4%B8%8B%E5%88%9B%E5%BB%BAkafka%E9%9B%86%E7%BE%A4.html" class="article-date"><time datetime="2015-07-24T16:00:00.000Z" itemprop="datePublished">2015-07-25</time></a>
</div>

    <div class="article-author">tonglin0325</div>
    

  </div>

  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <!-- 目录 -->

<div id="toc">
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-zai-mac-shang-an-zhuang-minikube"><span class="toc-text">1.在mac上安装minikube</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-gei-zk-he-kafka-chuang-jian-local-persistence-volumn"><span class="toc-text">2.给zk和kafka创建local persistence volumn</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-xia-zai-nbsp-bitnami-kafka-de-chart-bing-shi-yong-helm-lai-bu-shu-kafka-ji-qun"><span class="toc-text">3.下载 bitnami&#x2F;kafka的chart，并使用helm来部署kafka集群</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-lian-jie-kafka-ji-qun"><span class="toc-text">4.连接kafka集群</span></a></li></ol>
</div>

        <p>在minikube下安装的kafka集群分成4个步骤</p>
<h2 id="1-zai-mac-shang-an-zhuang-minikube"><a href="#1-在mac上安装minikube" class="headerlink" title="1.在mac上安装minikube"></a>1.在mac上安装minikube<a href="#1-zai-mac-shang-an-zhuang-minikube" class="header-anchor">#</a></h2><p>这里安装的minikube是基于virtualbox的，也就是minikube是运行在virtualbox启动的一个虚拟机中</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/tonglin0325/p/4584170.html">Mac下安装minikube</a></p>
<h2 id="2-gei-zk-he-kafka-chuang-jian-local-persistence-volumn"><a href="#2-给zk和kafka创建local-persistence-volumn" class="headerlink" title="2.给zk和kafka创建local persistence volumn"></a>2.给zk和kafka创建local persistence volumn<a href="#2-gei-zk-he-kafka-chuang-jian-local-persistence-volumn" class="header-anchor">#</a></h2><p>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9307d5b95b0b">Helm 安装Kafka</a></p>
<p>zk和kafka的数据需要落盘，所以需要依赖pv，这里创建的是k8s的local pv，注意如果volumeBindingMode选择WaitForFirstConsumer的话，只有在pod创建的时候，pvc才会绑定到pv上，没有pod就话pvc就一直是pending状态</p>
<p>StorageClass的yaml，local-storage.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: storage.k8s.io/v1</span><br><span class="line">kind: StorageClass</span><br><span class="line">metadata:</span><br><span class="line">  name: local-storage</span><br><span class="line">provisioner: kubernetes.io/no-provisioner</span><br><span class="line">volumeBindingMode: Immediate</span><br><span class="line">reclaimPolicy: Retain</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建一个叫local-storage的StorageClass</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./local-storage.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>进入virtualbox的虚拟器中创建如下的linux目录，minikube的虚拟器账号密码是docker tcuser</p>
<img src="/images/517519-20220714153104124-1134513096.png" width="800" height="471" loading="lazy">

<span id="more"></span>
<p>&nbsp;</p>
<p>在local-storage的sc下面创建3个local的pv用于存储zookeeper的数据，zookeeper-local-pv.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./zookeeper-local-pv.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>yaml，其中minikube是k8s node的name，可以使用minikube get pod -A查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-0</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/zookeeper/data-0</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-1</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/zookeeper/data-1</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-2</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/zookeeper/data-2</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建zk的pvc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./zookeeper-local-pvc.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>zookeeper-local-pvc.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-0</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-1</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-zookeeper-2</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>　　</p>
<p>在local-storage的sc下面创建3个local的pv用于存储kafka的数据，kafka-local-pv.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./kafka-local-pv.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>yaml，其中minikube是k8s node的name，可以使用minikube get pod -A查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-0</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/kafka/data-0</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-1</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/kafka/data-1</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-2</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  local:</span><br><span class="line">    path: /tmp/kafka/data-2</span><br><span class="line">  nodeAffinity:</span><br><span class="line">    required:</span><br><span class="line">      nodeSelectorTerms:</span><br><span class="line">      - matchExpressions:</span><br><span class="line">        - key: kubernetes.io/hostname</span><br><span class="line">          operator: In</span><br><span class="line">          values:</span><br><span class="line">          - minikube</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建kafka的pvc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./kafka-local-pvc.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>kafka-local-pvc.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-0</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-1</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: data-kafka-2</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 5Gi</span><br><span class="line">  storageClassName: local-storage</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看pv，注意这里所有pv刚创建的status都是Available，如果创建了pvc，状态会变成Bound</p>
<p>如果删除了pvc的话，pv的状态就会变成Released，这时这个pc已经无法被其他pvc绑定，需要edit这个pv，删除其中的claimRef配置</p>
<p>pv和pvc的各种状态可以参考文章：<a target="_blank" rel="noopener" href="https://www.qikqiak.com/post/status-in-pv-pvc/#:~:text=Available%20manual%207s-,%E6%96%B0%E5%BB%BAPVC,%E4%BF%9D%E8%AF%81%E7%9C%8B%E5%88%B0Pending%20%E7%8A%B6%E6%80%81%E3%80%82">Kubernetes 中 PV 和 PVC 的状态变化</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pv -A</span><br><span class="line">NAME                     CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                            STORAGECLASS    REASON   AGE</span><br><span class="line">data-kafka-zookeeper-0   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-1   local-storage            10h</span><br><span class="line">data-kafka-zookeeper-1   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-0   local-storage            10h</span><br><span class="line">data-kafka-zookeeper-2   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-2   local-storage            10h</span><br><span class="line">datadir-kafka-0          5Gi        RWO            Retain           Bound    default/data-kafka-0             local-storage            10h</span><br><span class="line">datadir-kafka-1          5Gi        RWO            Retain           Bound    default/data-kafka-1             local-storage            10h</span><br><span class="line">datadir-kafka-2          5Gi        RWO            Retain           Bound    default/data-kafka-2             local-storage            10h</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>　　　　</p>
<h2 id="3-xia-zai-nbsp-bitnami-kafka-de-chart-bing-shi-yong-helm-lai-bu-shu-kafka-ji-qun"><a href="#3-下载-nbsp-bitnami-kafka的chart，并使用helm来部署kafka集群" class="headerlink" title="3.下载&nbsp;bitnami/kafka的chart，并使用helm来部署kafka集群"></a>3.下载&nbsp;bitnami/kafka的chart，并使用helm来部署kafka集群<a href="#3-xia-zai-nbsp-bitnami-kafka-de-chart-bing-shi-yong-helm-lai-bu-shu-kafka-ji-qun" class="header-anchor">#</a></h2><p>添加 repo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm repo add incubator https://charts.helm.sh/incubator</span><br><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下载chart</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm fetch bitnami/kafka</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这边下载最新版本的chart是kafka-15.3.2.tgz</p>
<p>最新的chart版本和对应的kafka版本可以去网站查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://artifacthub.io/packages/helm/bitnami/kafka</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>或者使用search命令查看可以下载的版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">helm search repo bitnami/kafka -l</span><br><span class="line">NAME         	CHART VERSION	APP VERSION	DESCRIPTION</span><br><span class="line">bitnami/kafka	25.3.1       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.3.0       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.2.0       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.12      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.11      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.10      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.9       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.8       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.7       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.6       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.5       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.4       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.3       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.2       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.1       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.1.0       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.0.1       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	25.0.0       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.14      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.13      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.12      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.11      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.10      	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.9       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.8       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.7       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.6       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.5       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.4       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.3       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.2       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.1       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	24.0.0       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.7       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.6       	3.5.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.5       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.4       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.3       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.2       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.1       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	23.0.0       	3.5.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.6       	3.4.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.5       	3.4.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.4       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.3       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.2       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.1.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.0.3       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.0.2       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.0.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	22.0.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.6       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.5       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.4       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.3       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.2       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.4.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.3.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.3.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.2.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.1.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.1.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.0.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	21.0.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.1.1       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.1.0       	3.4.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.6       	3.3.2      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.5       	3.3.2      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.4       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.3       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.2       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.1       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	20.0.0       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.5       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.4       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.3       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.2       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.1       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.1.0       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.0.2       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.0.1       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	19.0.0       	3.3.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.5.0       	3.2.3      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.4.4       	3.2.3      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.4.3       	3.2.3      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.4.2       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.4.1       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.4.0       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.3.1       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.3.0       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.2.0       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.1.3       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.1.2       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.1.1       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.8       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.7       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.6       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.5       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.4       	3.2.1      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.3       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.2       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	18.0.0       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	17.2.6       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	17.2.5       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line">bitnami/kafka	17.2.3       	3.2.0      	Apache Kafka is a distributed streaming platfor...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果要指定版本的话，可以使用如下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm fetch bitnami/kafka --version 17.2.3</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改value.yaml，主要是修改了kafka和zk的persistence配置，添加了local-storage存储</p>
<p>以及service的type改成了ClusterIP，并配置了在宿主机上暴露的端口</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.lixianyang.xyz/posts/bitnami-chart-kafka-%E6%B7%BB%E5%8A%A0%E8%AE%A4%E8%AF%81/">k8s 集群暴露 kafka 端口&nbsp;</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br></pre></td><td class="code"><pre><span class="line">## @section Global parameters</span><br><span class="line">## Global Docker image parameters</span><br><span class="line">## Please, note that this will override the image parameters, including dependencies, configured to use the global value</span><br><span class="line">## Current available global Docker image parameters: imageRegistry, imagePullSecrets and storageClass</span><br><span class="line"></span><br><span class="line">## @param global.imageRegistry Global Docker image registry</span><br><span class="line">## @param global.imagePullSecrets Global Docker registry secret names as an array</span><br><span class="line">## @param global.storageClass Global StorageClass for Persistent Volume(s)</span><br><span class="line">##</span><br><span class="line">global:</span><br><span class="line">  imageRegistry: &quot;&quot;</span><br><span class="line">  ## E.g.</span><br><span class="line">  ## imagePullSecrets:</span><br><span class="line">  ##   - myRegistryKeySecretName</span><br><span class="line">  ##</span><br><span class="line">  imagePullSecrets: []</span><br><span class="line">  storageClass: &quot;&quot;</span><br><span class="line"></span><br><span class="line">## @section Common parameters</span><br><span class="line"></span><br><span class="line">## @param kubeVersion Override Kubernetes version</span><br><span class="line">##</span><br><span class="line">kubeVersion: &quot;&quot;</span><br><span class="line">## @param nameOverride String to partially override common.names.fullname</span><br><span class="line">##</span><br><span class="line">nameOverride: &quot;&quot;</span><br><span class="line">## @param fullnameOverride String to fully override common.names.fullname</span><br><span class="line">##</span><br><span class="line">fullnameOverride: &quot;&quot;</span><br><span class="line">## @param clusterDomain Default Kubernetes cluster domain</span><br><span class="line">##</span><br><span class="line">clusterDomain: cluster.local</span><br><span class="line">## @param commonLabels Labels to add to all deployed objects</span><br><span class="line">##</span><br><span class="line">commonLabels: &#123;&#125;</span><br><span class="line">## @param commonAnnotations Annotations to add to all deployed objects</span><br><span class="line">##</span><br><span class="line">commonAnnotations: &#123;&#125;</span><br><span class="line">## @param extraDeploy Array of extra objects to deploy with the release</span><br><span class="line">##</span><br><span class="line">extraDeploy: []</span><br><span class="line">## Enable diagnostic mode in the statefulset</span><br><span class="line">##</span><br><span class="line">diagnosticMode:</span><br><span class="line">  ## @param diagnosticMode.enabled Enable diagnostic mode (all probes will be disabled and the command will be overridden)</span><br><span class="line">  ##</span><br><span class="line">  enabled: false</span><br><span class="line">  ## @param diagnosticMode.command Command to override all containers in the statefulset</span><br><span class="line">  ##</span><br><span class="line">  command:</span><br><span class="line">    - sleep</span><br><span class="line">  ## @param diagnosticMode.args Args to override all containers in the statefulset</span><br><span class="line">  ##</span><br><span class="line">  args:</span><br><span class="line">    - infinity</span><br><span class="line"></span><br><span class="line">## @section Kafka parameters</span><br><span class="line"></span><br><span class="line">## Bitnami Kafka image version</span><br><span class="line">## ref: https://hub.docker.com/r/bitnami/kafka/tags/</span><br><span class="line">## @param image.registry Kafka image registry</span><br><span class="line">## @param image.repository Kafka image repository</span><br><span class="line">## @param image.tag Kafka image tag (immutable tags are recommended)</span><br><span class="line">## @param image.pullPolicy Kafka image pull policy</span><br><span class="line">## @param image.pullSecrets Specify docker-registry secret names as an array</span><br><span class="line">## @param image.debug Specify if debug values should be set</span><br><span class="line">##</span><br><span class="line">image:</span><br><span class="line">  registry: docker.io</span><br><span class="line">  repository: bitnami/kafka</span><br><span class="line">  tag: 3.1.0-debian-10-r20</span><br><span class="line">  ## Specify a imagePullPolicy</span><br><span class="line">  ## Defaults to &#x27;Always&#x27; if image tag is &#x27;latest&#x27;, else set to &#x27;IfNotPresent&#x27;</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images</span><br><span class="line">  ##</span><br><span class="line">  pullPolicy: IfNotPresent</span><br><span class="line">  ## Optionally specify an array of imagePullSecrets.</span><br><span class="line">  ## Secrets must be manually created in the namespace.</span><br><span class="line">  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## pullSecrets:</span><br><span class="line">  ##   - myRegistryKeySecretName</span><br><span class="line">  ##</span><br><span class="line">  pullSecrets: []</span><br><span class="line">  ## Set to true if you would like to see extra information on logs</span><br><span class="line">  ##</span><br><span class="line">  debug: false</span><br><span class="line">## @param config Configuration file for Kafka. Auto-generated based on other parameters when not specified</span><br><span class="line">## Specify content for server.properties</span><br><span class="line">## NOTE: This will override any KAFKA_CFG_ environment variables (including those set by the chart)</span><br><span class="line">## The server.properties is auto-generated based on other parameters when this parameter is not specified</span><br><span class="line">## e.g:</span><br><span class="line">## config: |-</span><br><span class="line">##   broker.id=-1</span><br><span class="line">##   listeners=PLAINTEXT://:9092</span><br><span class="line">##   advertised.listeners=PLAINTEXT://KAFKA_IP:9092</span><br><span class="line">##   num.network.threads=3</span><br><span class="line">##   num.io.threads=8</span><br><span class="line">##   socket.send.buffer.bytes=102400</span><br><span class="line">##   socket.receive.buffer.bytes=102400</span><br><span class="line">##   socket.request.max.bytes=104857600</span><br><span class="line">##   log.dirs=/bitnami/kafka/data</span><br><span class="line">##   num.partitions=1</span><br><span class="line">##   num.recovery.threads.per.data.dir=1</span><br><span class="line">##   offsets.topic.replication.factor=1</span><br><span class="line">##   transaction.state.log.replication.factor=1</span><br><span class="line">##   transaction.state.log.min.isr=1</span><br><span class="line">##   log.flush.interval.messages=10000</span><br><span class="line">##   log.flush.interval.ms=1000</span><br><span class="line">##   log.retention.hours=168</span><br><span class="line">##   log.retention.bytes=1073741824</span><br><span class="line">##   log.segment.bytes=1073741824</span><br><span class="line">##   log.retention.check.interval.ms=300000</span><br><span class="line">##   zookeeper.connect=ZOOKEEPER_SERVICE_NAME</span><br><span class="line">##   zookeeper.connection.timeout.ms=6000</span><br><span class="line">##   group.initial.rebalance.delay.ms=0</span><br><span class="line">##</span><br><span class="line">config: &quot;&quot;</span><br><span class="line">## @param existingConfigmap ConfigMap with Kafka Configuration</span><br><span class="line">## NOTE: This will override `config` AND any KAFKA_CFG_ environment variables</span><br><span class="line">##</span><br><span class="line">existingConfigmap: &quot;&quot;</span><br><span class="line">## @param log4j An optional log4j.properties file to overwrite the default of the Kafka brokers</span><br><span class="line">## An optional log4j.properties file to overwrite the default of the Kafka brokers</span><br><span class="line">## ref: https://github.com/apache/kafka/blob/trunk/config/log4j.properties</span><br><span class="line">##</span><br><span class="line">log4j: &quot;&quot;</span><br><span class="line">## @param existingLog4jConfigMap The name of an existing ConfigMap containing a log4j.properties file</span><br><span class="line">## The name of an existing ConfigMap containing a log4j.properties file</span><br><span class="line">## NOTE: this will override `log4j`</span><br><span class="line">##</span><br><span class="line">existingLog4jConfigMap: &quot;&quot;</span><br><span class="line">## @param heapOpts Kafka Java Heap size</span><br><span class="line">##</span><br><span class="line">heapOpts: -Xmx1024m -Xms1024m</span><br><span class="line">## @param deleteTopicEnable Switch to enable topic deletion or not</span><br><span class="line">##</span><br><span class="line">deleteTopicEnable: false</span><br><span class="line">## @param autoCreateTopicsEnable Switch to enable auto creation of topics. Enabling auto creation of topics not recommended for production or similar environments</span><br><span class="line">##</span><br><span class="line">autoCreateTopicsEnable: true</span><br><span class="line">## @param logFlushIntervalMessages The number of messages to accept before forcing a flush of data to disk</span><br><span class="line">##</span><br><span class="line">logFlushIntervalMessages: _10000</span><br><span class="line">## @param logFlushIntervalMs The maximum amount of time a message can sit in a log before we force a flush</span><br><span class="line">##</span><br><span class="line">logFlushIntervalMs: 1000</span><br><span class="line">## @param logRetentionBytes A size-based retention policy for logs</span><br><span class="line">##</span><br><span class="line">logRetentionBytes: _1073741824</span><br><span class="line">## @param logRetentionCheckIntervalMs The interval at which log segments are checked to see if they can be deleted</span><br><span class="line">##</span><br><span class="line">logRetentionCheckIntervalMs: 300000</span><br><span class="line">## @param logRetentionHours The minimum age of a log file to be eligible for deletion due to age</span><br><span class="line">##</span><br><span class="line">logRetentionHours: 168</span><br><span class="line">## @param logSegmentBytes The maximum size of a log segment file. When this size is reached a new log segment will be created</span><br><span class="line">##</span><br><span class="line">logSegmentBytes: _1073741824</span><br><span class="line">## @param logsDirs A comma separated list of directories under which to store log files</span><br><span class="line">##</span><br><span class="line">logsDirs: /bitnami/kafka/data</span><br><span class="line">## @param maxMessageBytes The largest record batch size allowed by Kafka</span><br><span class="line">##</span><br><span class="line">maxMessageBytes: _1000012</span><br><span class="line">## @param defaultReplicationFactor Default replication factors for automatically created topics</span><br><span class="line">##</span><br><span class="line">defaultReplicationFactor: 1</span><br><span class="line">## @param offsetsTopicReplicationFactor The replication factor for the offsets topic</span><br><span class="line">##</span><br><span class="line">offsetsTopicReplicationFactor: 1</span><br><span class="line">## @param transactionStateLogReplicationFactor The replication factor for the transaction topic</span><br><span class="line">##</span><br><span class="line">transactionStateLogReplicationFactor: 1</span><br><span class="line">## @param transactionStateLogMinIsr Overridden min.insync.replicas config for the transaction topic</span><br><span class="line">##</span><br><span class="line">transactionStateLogMinIsr: 1</span><br><span class="line">## @param numIoThreads The number of threads doing disk I/O</span><br><span class="line">##</span><br><span class="line">numIoThreads: 8</span><br><span class="line">## @param numNetworkThreads The number of threads handling network requests</span><br><span class="line">##</span><br><span class="line">numNetworkThreads: 3</span><br><span class="line">## @param numPartitions The default number of log partitions per topic</span><br><span class="line">##</span><br><span class="line">numPartitions: 1</span><br><span class="line">## @param numRecoveryThreadsPerDataDir The number of threads per data directory to be used for log recovery at startup and flushing at shutdown</span><br><span class="line">##</span><br><span class="line">numRecoveryThreadsPerDataDir: 1</span><br><span class="line">## @param socketReceiveBufferBytes The receive buffer (SO_RCVBUF) used by the socket server</span><br><span class="line">##</span><br><span class="line">socketReceiveBufferBytes: 102400</span><br><span class="line">## @param socketRequestMaxBytes The maximum size of a request that the socket server will accept (protection against OOM)</span><br><span class="line">##</span><br><span class="line">socketRequestMaxBytes: _104857600</span><br><span class="line">## @param socketSendBufferBytes The send buffer (SO_SNDBUF) used by the socket server</span><br><span class="line">##</span><br><span class="line">socketSendBufferBytes: 102400</span><br><span class="line">## @param zookeeperConnectionTimeoutMs Timeout in ms for connecting to ZooKeeper</span><br><span class="line">##</span><br><span class="line">zookeeperConnectionTimeoutMs: 6000</span><br><span class="line">## @param zookeeperChrootPath Path which puts data under some path in the global ZooKeeper namespace</span><br><span class="line">## ref: https://kafka.apache.org/documentation/#brokerconfigs_zookeeper.connect</span><br><span class="line">##</span><br><span class="line">zookeeperChrootPath: &quot;&quot;</span><br><span class="line">## @param authorizerClassName The Authorizer is configured by setting authorizer.class.name=kafka.security.authorizer.AclAuthorizer in server.properties</span><br><span class="line">##</span><br><span class="line">authorizerClassName: &quot;&quot;</span><br><span class="line">## @param allowEveryoneIfNoAclFound By default, if a resource has no associated ACLs, then no one is allowed to access that resource except super users</span><br><span class="line">##</span><br><span class="line">allowEveryoneIfNoAclFound: true</span><br><span class="line">## @param superUsers You can add super users in server.properties</span><br><span class="line">##</span><br><span class="line">superUsers: User:admin</span><br><span class="line">## Authentication parameters</span><br><span class="line">## https://github.com/bitnami/bitnami-docker-kafka#security</span><br><span class="line">##</span><br><span class="line">auth:</span><br><span class="line">  ## Authentication protocol for client and inter-broker communications</span><br><span class="line">  ## This table shows the security provided on each protocol:</span><br><span class="line">  ## | Method    | Authentication                | Encryption via TLS |</span><br><span class="line">  ## | plaintext | None                          | No                 |</span><br><span class="line">  ## | tls       | None                          | Yes                |</span><br><span class="line">  ## | mtls      | Yes (two-way authentication)  | Yes                |</span><br><span class="line">  ## | sasl      | Yes (via SASL)                | No                 |</span><br><span class="line">  ## | sasl_tls  | Yes (via SASL)                | Yes                |</span><br><span class="line">  ## @param auth.clientProtocol Authentication protocol for communications with clients. Allowed protocols: `plaintext`, `tls`, `mtls`, `sasl` and `sasl_tls`</span><br><span class="line">  ## @param auth.externalClientProtocol Authentication protocol for communications with external clients. Defaults to value of `auth.clientProtocol`. Allowed protocols: `plaintext`, `tls`, `mtls`, `sasl` and `sasl_tls`</span><br><span class="line">  ## @param auth.interBrokerProtocol Authentication protocol for inter-broker communications. Allowed protocols: `plaintext`, `tls`, `mtls`, `sasl` and `sasl_tls`</span><br><span class="line">  ##</span><br><span class="line">  clientProtocol: plaintext</span><br><span class="line">  # Note: empty by default for backwards compatibility reasons, find more information at</span><br><span class="line">  # https://github.com/bitnami/charts/pull/8902/</span><br><span class="line">  externalClientProtocol: &quot;&quot;</span><br><span class="line">  interBrokerProtocol: plaintext</span><br><span class="line">  ## SASL configuration</span><br><span class="line">  ##</span><br><span class="line">  sasl:</span><br><span class="line">    ## @param auth.sasl.mechanisms SASL mechanisms when either `auth.interBrokerProtocol`, `auth.clientProtocol` or `auth.externalClientProtocol` are `sasl`. Allowed types: `plain`, `scram-sha-256`, `scram-sha-512`</span><br><span class="line">    ##</span><br><span class="line">    mechanisms: plain,scram-sha-256,scram-sha-512</span><br><span class="line">    ## @param auth.sasl.interBrokerMechanism SASL mechanism for inter broker communication.</span><br><span class="line">    ##</span><br><span class="line">    interBrokerMechanism: plain</span><br><span class="line">    ## JAAS configuration for SASL authentication.</span><br><span class="line">    ##</span><br><span class="line">    jaas:</span><br><span class="line">      ## @param auth.sasl.jaas.clientUsers Kafka client user list</span><br><span class="line">      ##</span><br><span class="line">      ## clientUsers:</span><br><span class="line">      ##   - user1</span><br><span class="line">      ##   - user2</span><br><span class="line">      ##</span><br><span class="line">      clientUsers:</span><br><span class="line">        - user</span><br><span class="line">      ## @param auth.sasl.jaas.clientPasswords Kafka client passwords. This is mandatory if more than one user is specified in clientUsers</span><br><span class="line">      ##</span><br><span class="line">      ## clientPasswords:</span><br><span class="line">      ##   - password1</span><br><span class="line">      ##   - password2&quot;</span><br><span class="line">      ##</span><br><span class="line">      clientPasswords: []</span><br><span class="line">      ## @param auth.sasl.jaas.interBrokerUser Kafka inter broker communication user for SASL authentication</span><br><span class="line">      ##</span><br><span class="line">      interBrokerUser: admin</span><br><span class="line">      ## @param auth.sasl.jaas.interBrokerPassword Kafka inter broker communication password for SASL authentication</span><br><span class="line">      ##</span><br><span class="line">      interBrokerPassword: &quot;&quot;</span><br><span class="line">      ## @param auth.sasl.jaas.zookeeperUser Kafka ZooKeeper user for SASL authentication</span><br><span class="line">      ##</span><br><span class="line">      zookeeperUser: &quot;&quot;</span><br><span class="line">      ## @param auth.sasl.jaas.zookeeperPassword Kafka ZooKeeper password for SASL authentication</span><br><span class="line">      ##</span><br><span class="line">      zookeeperPassword: &quot;&quot;</span><br><span class="line">      ## @param auth.sasl.jaas.existingSecret Name of the existing secret containing credentials for clientUsers, interBrokerUser and zookeeperUser</span><br><span class="line">      ## Create this secret running the command below where SECRET_NAME is the name of the secret you want to create:</span><br><span class="line">      ##       kubectl create secret generic SECRET_NAME --from-literal=client-passwords=CLIENT_PASSWORD1,CLIENT_PASSWORD2 --from-literal=inter-broker-password=INTER_BROKER_PASSWORD --from-literal=zookeeper-password=ZOOKEEPER_PASSWORD</span><br><span class="line">      ##</span><br><span class="line">      existingSecret: &quot;&quot;</span><br><span class="line">  ## TLS configuration</span><br><span class="line">  ##</span><br><span class="line">  tls:</span><br><span class="line">    ## @param auth.tls.type Format to use for TLS certificates. Allowed types: `jks` and `pem`</span><br><span class="line">    ##</span><br><span class="line">    type: jks</span><br><span class="line">    ## @param auth.tls.existingSecrets Array existing secrets containing the TLS certificates for the Kafka brokers</span><br><span class="line">    ## When using &#x27;jks&#x27; format for certificates, each secret should contain a truststore and a keystore.</span><br><span class="line">    ## Create these secrets following the steps below:</span><br><span class="line">    ## 1) Generate your truststore and keystore files. Helpful script: https://raw.githubusercontent.com/confluentinc/confluent-platform-security-tools/master/kafka-generate-ssl.sh</span><br><span class="line">    ## 2) Rename your truststore to `kafka.truststore.jks`.</span><br><span class="line">    ## 3) Rename your keystores to `kafka-X.keystore.jks` where X is the ID of each Kafka broker.</span><br><span class="line">    ## 4) Run the command below one time per broker to create its associated secret (SECRET_NAME_X is the name of the secret you want to create):</span><br><span class="line">    ##       kubectl create secret generic SECRET_NAME_0 --from-file=kafka.truststore.jks=./kafka.truststore.jks --from-file=kafka.keystore.jks=./kafka-0.keystore.jks</span><br><span class="line">    ##       kubectl create secret generic SECRET_NAME_1 --from-file=kafka.truststore.jks=./kafka.truststore.jks --from-file=kafka.keystore.jks=./kafka-1.keystore.jks</span><br><span class="line">    ##       ...</span><br><span class="line">    ##</span><br><span class="line">    ## When using &#x27;pem&#x27; format for certificates, each secret should contain a public CA certificate, a public certificate and one private key.</span><br><span class="line">    ## Create these secrets following the steps below:</span><br><span class="line">    ## 1) Create a certificate key and signing request per Kafka broker, and sign the signing request with your CA</span><br><span class="line">    ## 2) Rename your CA file to `kafka.ca.crt`.</span><br><span class="line">    ## 3) Rename your certificates to `kafka-X.tls.crt` where X is the ID of each Kafka broker.</span><br><span class="line">    ## 3) Rename your keys to `kafka-X.tls.key` where X is the ID of each Kafka broker.</span><br><span class="line">    ## 4) Run the command below one time per broker to create its associated secret (SECRET_NAME_X is the name of the secret you want to create):</span><br><span class="line">    ##       kubectl create secret generic SECRET_NAME_0 --from-file=ca.crt=./kafka.ca.crt --from-file=tls.crt=./kafka-0.tls.crt --from-file=tls.key=./kafka-0.tls.key</span><br><span class="line">    ##       kubectl create secret generic SECRET_NAME_1 --from-file=ca.crt=./kafka.ca.crt --from-file=tls.crt=./kafka-1.tls.crt --from-file=tls.key=./kafka-1.tls.key</span><br><span class="line">    ##       ...</span><br><span class="line">    ##</span><br><span class="line">    existingSecrets: []</span><br><span class="line">    ## @param auth.tls.autoGenerated Generate automatically self-signed TLS certificates for Kafka brokers. Currently only supported if `auth.tls.type` is `pem`</span><br><span class="line">    ## Note: ignored when using &#x27;jks&#x27; format or `auth.tls.existingSecrets` is not empty</span><br><span class="line">    ##</span><br><span class="line">    autoGenerated: false</span><br><span class="line">    ## @param auth.tls.password Password to access the JKS files or PEM key when they are password-protected.</span><br><span class="line">    ## Note: ignored when using &#x27;existingSecret&#x27;.</span><br><span class="line">    ##</span><br><span class="line">    password: &quot;&quot;</span><br><span class="line">    ## @param auth.tls.existingSecret Name of the secret containing the password to access the JKS files or PEM key when they are password-protected. (`key`: `password`)</span><br><span class="line">    ##</span><br><span class="line">    existingSecret: &quot;&quot;</span><br><span class="line">    ## @param auth.tls.jksTruststoreSecret Name of the existing secret containing your truststore if truststore not existing or different from the ones in the `auth.tls.existingSecrets`</span><br><span class="line">    ## Note: ignored when using &#x27;pem&#x27; format for certificates.</span><br><span class="line">    ##</span><br><span class="line">    jksTruststoreSecret: &quot;&quot;</span><br><span class="line">    ## @param auth.tls.jksKeystoreSAN The secret key from the `auth.tls.existingSecrets` containing the keystore with a SAN certificate</span><br><span class="line">    ## The SAN certificate in it should be issued with Subject Alternative Names for all headless services:</span><br><span class="line">    ##  - kafka-0.kafka-headless.kafka.svc.cluster.local</span><br><span class="line">    ##  - kafka-1.kafka-headless.kafka.svc.cluster.local</span><br><span class="line">    ##  - kafka-2.kafka-headless.kafka.svc.cluster.local</span><br><span class="line">    ## Note: ignored when using &#x27;pem&#x27; format for certificates.</span><br><span class="line">    ##</span><br><span class="line">    jksKeystoreSAN: &quot;&quot;</span><br><span class="line">    ## @param auth.tls.jksTruststore The secret key from the `auth.tls.existingSecrets` or `auth.tls.jksTruststoreSecret` containing the truststore</span><br><span class="line">    ## Note: ignored when using &#x27;pem&#x27; format for certificates.</span><br><span class="line">    ##</span><br><span class="line">    jksTruststore: &quot;&quot;</span><br><span class="line">    ## @param auth.tls.endpointIdentificationAlgorithm The endpoint identification algorithm to validate server hostname using server certificate</span><br><span class="line">    ## Disable server host name verification by setting it to an empty string.</span><br><span class="line">    ## ref: https://docs.confluent.io/current/kafka/authentication_ssl.html#optional-settings</span><br><span class="line">    ##</span><br><span class="line">    endpointIdentificationAlgorithm: https</span><br><span class="line">## @param listeners The address(es) the socket server listens on. Auto-calculated it&#x27;s set to an empty array</span><br><span class="line">## When it&#x27;s set to an empty array, the listeners will be configured</span><br><span class="line">## based on the authentication protocols (auth.clientProtocol, auth.externalClientProtocol and auth.interBrokerProtocol parameters)</span><br><span class="line">##</span><br><span class="line">listeners: []</span><br><span class="line">## @param advertisedListeners The address(es) (hostname:port) the broker will advertise to producers and consumers. Auto-calculated it&#x27;s set to an empty array</span><br><span class="line">## When it&#x27;s set to an empty array, the advertised listeners will be configured</span><br><span class="line">## based on the authentication protocols (auth.clientProtocol, auth.externalClientProtocol and auth.interBrokerProtocol parameters)</span><br><span class="line">##</span><br><span class="line">advertisedListeners: []</span><br><span class="line">## @param listenerSecurityProtocolMap The protocol-&gt;listener mapping. Auto-calculated it&#x27;s set to nil</span><br><span class="line">## When it&#x27;s nil, the listeners will be configured based on the authentication protocols (auth.clientProtocol, auth.externalClientProtocol and auth.interBrokerProtocol parameters)</span><br><span class="line">##</span><br><span class="line">listenerSecurityProtocolMap: &quot;&quot;</span><br><span class="line">## @param allowPlaintextListener Allow to use the PLAINTEXT listener</span><br><span class="line">##</span><br><span class="line">allowPlaintextListener: true</span><br><span class="line">## @param interBrokerListenerName The listener that the brokers should communicate on</span><br><span class="line">##</span><br><span class="line">interBrokerListenerName: INTERNAL</span><br><span class="line">## @param command Override Kafka container command</span><br><span class="line">##</span><br><span class="line">command:</span><br><span class="line">  - /scripts/setup.sh</span><br><span class="line">## @param args Override Kafka container arguments</span><br><span class="line">##</span><br><span class="line">args: []</span><br><span class="line">## @param extraEnvVars Extra environment variables to add to Kafka pods</span><br><span class="line">## ref: https://github.com/bitnami/bitnami-docker-kafka#configuration</span><br><span class="line">## e.g:</span><br><span class="line">## extraEnvVars:</span><br><span class="line">##   - name: KAFKA_CFG_BACKGROUND_THREADS</span><br><span class="line">##     value: &quot;10&quot;</span><br><span class="line">##</span><br><span class="line">extraEnvVars: []</span><br><span class="line">## @param extraEnvVarsCM ConfigMap with extra environment variables</span><br><span class="line">##</span><br><span class="line">extraEnvVarsCM: &quot;&quot;</span><br><span class="line">## @param extraEnvVarsSecret Secret with extra environment variables</span><br><span class="line">##</span><br><span class="line">extraEnvVarsSecret: &quot;&quot;</span><br><span class="line"></span><br><span class="line">## @section Statefulset parameters</span><br><span class="line"></span><br><span class="line">## @param replicaCount Number of Kafka nodes</span><br><span class="line">##</span><br><span class="line">replicaCount: 3</span><br><span class="line">## @param minBrokerId Minimal broker.id value, nodes increment their `broker.id` respectively</span><br><span class="line">## Brokers increment their ID starting at this minimal value.</span><br><span class="line">## E.g., with `minBrokerId=100` and 3 nodes, IDs will be 100, 101, 102 for brokers 0, 1, and 2, respectively.</span><br><span class="line">##</span><br><span class="line">minBrokerId: 0</span><br><span class="line">## @param containerPorts.client Kafka client container port</span><br><span class="line">## @param containerPorts.internal Kafka inter-broker container port</span><br><span class="line">## @param containerPorts.external Kafka external container port</span><br><span class="line">##</span><br><span class="line">containerPorts:</span><br><span class="line">  client: 9092</span><br><span class="line">  internal: 9093</span><br><span class="line">  external: 9094</span><br><span class="line">## Configure extra options for Kafka containers&#x27; liveness, readiness and startup probes</span><br><span class="line">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes</span><br><span class="line">## @param livenessProbe.enabled Enable livenessProbe on Kafka containers</span><br><span class="line">## @param livenessProbe.initialDelaySeconds Initial delay seconds for livenessProbe</span><br><span class="line">## @param livenessProbe.periodSeconds Period seconds for livenessProbe</span><br><span class="line">## @param livenessProbe.timeoutSeconds Timeout seconds for livenessProbe</span><br><span class="line">## @param livenessProbe.failureThreshold Failure threshold for livenessProbe</span><br><span class="line">## @param livenessProbe.successThreshold Success threshold for livenessProbe</span><br><span class="line">##</span><br><span class="line">livenessProbe:</span><br><span class="line">  enabled: true</span><br><span class="line">  initialDelaySeconds: 10</span><br><span class="line">  timeoutSeconds: 5</span><br><span class="line">  failureThreshold: 3</span><br><span class="line">  periodSeconds: 10</span><br><span class="line">  successThreshold: 1</span><br><span class="line">## @param readinessProbe.enabled Enable readinessProbe on Kafka containers</span><br><span class="line">## @param readinessProbe.initialDelaySeconds Initial delay seconds for readinessProbe</span><br><span class="line">## @param readinessProbe.periodSeconds Period seconds for readinessProbe</span><br><span class="line">## @param readinessProbe.timeoutSeconds Timeout seconds for readinessProbe</span><br><span class="line">## @param readinessProbe.failureThreshold Failure threshold for readinessProbe</span><br><span class="line">## @param readinessProbe.successThreshold Success threshold for readinessProbe</span><br><span class="line">##</span><br><span class="line">readinessProbe:</span><br><span class="line">  enabled: true</span><br><span class="line">  initialDelaySeconds: 5</span><br><span class="line">  failureThreshold: 6</span><br><span class="line">  timeoutSeconds: 5</span><br><span class="line">  periodSeconds: 10</span><br><span class="line">  successThreshold: 1</span><br><span class="line">## @param startupProbe.enabled Enable startupProbe on Kafka containers</span><br><span class="line">## @param startupProbe.initialDelaySeconds Initial delay seconds for startupProbe</span><br><span class="line">## @param startupProbe.periodSeconds Period seconds for startupProbe</span><br><span class="line">## @param startupProbe.timeoutSeconds Timeout seconds for startupProbe</span><br><span class="line">## @param startupProbe.failureThreshold Failure threshold for startupProbe</span><br><span class="line">## @param startupProbe.successThreshold Success threshold for startupProbe</span><br><span class="line">##</span><br><span class="line">startupProbe:</span><br><span class="line">  enabled: false</span><br><span class="line">  initialDelaySeconds: 30</span><br><span class="line">  periodSeconds: 10</span><br><span class="line">  timeoutSeconds: 1</span><br><span class="line">  failureThreshold: 15</span><br><span class="line">  successThreshold: 1</span><br><span class="line">## @param customLivenessProbe Custom livenessProbe that overrides the default one</span><br><span class="line">##</span><br><span class="line">customLivenessProbe: &#123;&#125;</span><br><span class="line">## @param customReadinessProbe Custom readinessProbe that overrides the default one</span><br><span class="line">##</span><br><span class="line">customReadinessProbe: &#123;&#125;</span><br><span class="line">## @param customStartupProbe Custom startupProbe that overrides the default one</span><br><span class="line">##</span><br><span class="line">customStartupProbe: &#123;&#125;</span><br><span class="line">## @param lifecycleHooks lifecycleHooks for the Kafka container to automate configuration before or after startup</span><br><span class="line">##</span><br><span class="line">lifecycleHooks: &#123;&#125;</span><br><span class="line">## Kafka resource requests and limits</span><br><span class="line">## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">## @param resources.limits The resources limits for the container</span><br><span class="line">## @param resources.requests The requested resources for the container</span><br><span class="line">##</span><br><span class="line">resources:</span><br><span class="line">  limits: &#123;&#125;</span><br><span class="line">  requests: &#123;&#125;</span><br><span class="line">## Kafka pods&#x27; Security Context</span><br><span class="line">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod</span><br><span class="line">## @param podSecurityContext.enabled Enable security context for the pods</span><br><span class="line">## @param podSecurityContext.fsGroup Set Kafka pod&#x27;s Security Context fsGroup</span><br><span class="line">##</span><br><span class="line">podSecurityContext:</span><br><span class="line">  enabled: true</span><br><span class="line">  fsGroup: 1001</span><br><span class="line">## Kafka containers&#x27; Security Context</span><br><span class="line">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container</span><br><span class="line">## @param containerSecurityContext.enabled Enable Kafka containers&#x27; Security Context</span><br><span class="line">## @param containerSecurityContext.runAsUser Set Kafka containers&#x27; Security Context runAsUser</span><br><span class="line">## @param containerSecurityContext.runAsNonRoot Set Kafka containers&#x27; Security Context runAsNonRoot</span><br><span class="line">## e.g:</span><br><span class="line">##   containerSecurityContext:</span><br><span class="line">##     enabled: true</span><br><span class="line">##     capabilities:</span><br><span class="line">##       drop: [&quot;NET_RAW&quot;]</span><br><span class="line">##     readOnlyRootFilesystem: true</span><br><span class="line">##</span><br><span class="line">containerSecurityContext:</span><br><span class="line">  enabled: true</span><br><span class="line">  runAsUser: 1001</span><br><span class="line">  runAsNonRoot: true</span><br><span class="line">## @param hostAliases Kafka pods host aliases</span><br><span class="line">## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/</span><br><span class="line">##</span><br><span class="line">hostAliases: []</span><br><span class="line">## @param hostNetwork Specify if host network should be enabled for Kafka pods</span><br><span class="line">##</span><br><span class="line">hostNetwork: false</span><br><span class="line">## @param hostIPC Specify if host IPC should be enabled for Kafka pods</span><br><span class="line">##</span><br><span class="line">hostIPC: false</span><br><span class="line">## @param podLabels Extra labels for Kafka pods</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/</span><br><span class="line">##</span><br><span class="line">podLabels: &#123;&#125;</span><br><span class="line">## @param podAnnotations Extra annotations for Kafka pods</span><br><span class="line">## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/</span><br><span class="line">##</span><br><span class="line">podAnnotations: &#123;&#125;</span><br><span class="line">## @param podAffinityPreset Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity</span><br><span class="line">##</span><br><span class="line">podAffinityPreset: &quot;&quot;</span><br><span class="line">## @param podAntiAffinityPreset Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity</span><br><span class="line">##</span><br><span class="line">podAntiAffinityPreset: soft</span><br><span class="line">## Node affinity preset</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity</span><br><span class="line">##</span><br><span class="line">nodeAffinityPreset:</span><br><span class="line">  ## @param nodeAffinityPreset.type Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">  ##</span><br><span class="line">  type: &quot;&quot;</span><br><span class="line">  ## @param nodeAffinityPreset.key Node label key to match Ignored if `affinity` is set.</span><br><span class="line">  ## E.g.</span><br><span class="line">  ## key: &quot;kubernetes.io/e2e-az-name&quot;</span><br><span class="line">  ##</span><br><span class="line">  key: &quot;&quot;</span><br><span class="line">  ## @param nodeAffinityPreset.values Node label values to match. Ignored if `affinity` is set.</span><br><span class="line">  ## E.g.</span><br><span class="line">  ## values:</span><br><span class="line">  ##   - e2e-az1</span><br><span class="line">  ##   - e2e-az2</span><br><span class="line">  ##</span><br><span class="line">  values: []</span><br><span class="line">## @param affinity Affinity for pod assignment</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity</span><br><span class="line">## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it&#x27;s set</span><br><span class="line">##</span><br><span class="line">affinity: &#123;&#125;</span><br><span class="line">## @param nodeSelector Node labels for pod assignment</span><br><span class="line">## Ref: https://kubernetes.io/docs/user-guide/node-selection/</span><br><span class="line">##</span><br><span class="line">nodeSelector: &#123;&#125;</span><br><span class="line">## @param tolerations Tolerations for pod assignment</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/</span><br><span class="line">##</span><br><span class="line">tolerations: []</span><br><span class="line">## @param topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods</span><br><span class="line">##</span><br><span class="line">topologySpreadConstraints: &#123;&#125;</span><br><span class="line">## @param terminationGracePeriodSeconds Seconds the pod needs to gracefully terminate</span><br><span class="line">## ref: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#hook-handler-execution</span><br><span class="line">##</span><br><span class="line">terminationGracePeriodSeconds: &quot;&quot;</span><br><span class="line">## @param podManagementPolicy StatefulSet controller supports relax its ordering guarantees while preserving its uniqueness and identity guarantees. There are two valid pod management policies: OrderedReady and Parallel</span><br><span class="line">## ref: https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#pod-management-policy</span><br><span class="line">##</span><br><span class="line">podManagementPolicy: Parallel</span><br><span class="line">## @param priorityClassName Name of the existing priority class to be used by kafka pods</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/</span><br><span class="line">##</span><br><span class="line">priorityClassName: &quot;&quot;</span><br><span class="line">## @param schedulerName Name of the k8s scheduler (other than default)</span><br><span class="line">## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/</span><br><span class="line">##</span><br><span class="line">schedulerName: &quot;&quot;</span><br><span class="line">## @param updateStrategy.type Kafka statefulset strategy type</span><br><span class="line">## @param updateStrategy.rollingUpdate Kafka statefulset rolling update configuration parameters</span><br><span class="line">## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies</span><br><span class="line">##</span><br><span class="line">updateStrategy:</span><br><span class="line">  type: RollingUpdate</span><br><span class="line">  rollingUpdate: &#123;&#125;</span><br><span class="line">## @param extraVolumes Optionally specify extra list of additional volumes for the Kafka pod(s)</span><br><span class="line">## e.g:</span><br><span class="line">## extraVolumes:</span><br><span class="line">##   - name: kafka-jaas</span><br><span class="line">##     secret:</span><br><span class="line">##       secretName: kafka-jaas</span><br><span class="line">##</span><br><span class="line">extraVolumes: []</span><br><span class="line">## @param extraVolumeMounts Optionally specify extra list of additional volumeMounts for the Kafka container(s)</span><br><span class="line">## extraVolumeMounts:</span><br><span class="line">##   - name: kafka-jaas</span><br><span class="line">##     mountPath: /bitnami/kafka/config/kafka_jaas.conf</span><br><span class="line">##     subPath: kafka_jaas.conf</span><br><span class="line">##</span><br><span class="line">extraVolumeMounts: []</span><br><span class="line">## @param sidecars Add additional sidecar containers to the Kafka pod(s)</span><br><span class="line">## e.g:</span><br><span class="line">## sidecars:</span><br><span class="line">##   - name: your-image-name</span><br><span class="line">##     image: your-image</span><br><span class="line">##     imagePullPolicy: Always</span><br><span class="line">##     ports:</span><br><span class="line">##       - name: portname</span><br><span class="line">##         containerPort: 1234</span><br><span class="line">##</span><br><span class="line">sidecars: []</span><br><span class="line">## @param initContainers Add additional Add init containers to the Kafka pod(s)</span><br><span class="line">## e.g:</span><br><span class="line">## initContainers:</span><br><span class="line">##   - name: your-image-name</span><br><span class="line">##     image: your-image</span><br><span class="line">##     imagePullPolicy: Always</span><br><span class="line">##     ports:</span><br><span class="line">##       - name: portname</span><br><span class="line">##         containerPort: 1234</span><br><span class="line">##</span><br><span class="line">initContainers: []</span><br><span class="line">## Kafka Pod Disruption Budget</span><br><span class="line">## ref: https://kubernetes.io/docs/concepts/workloads/pods/disruptions/</span><br><span class="line">## @param pdb.create Deploy a pdb object for the Kafka pod</span><br><span class="line">## @param pdb.minAvailable Maximum number/percentage of unavailable Kafka replicas</span><br><span class="line">## @param pdb.maxUnavailable Maximum number/percentage of unavailable Kafka replicas</span><br><span class="line">##</span><br><span class="line">pdb:</span><br><span class="line">  create: false</span><br><span class="line">  minAvailable: &quot;&quot;</span><br><span class="line">  maxUnavailable: 1</span><br><span class="line"></span><br><span class="line">## @section Traffic Exposure parameters</span><br><span class="line"></span><br><span class="line">## Service parameters</span><br><span class="line">##</span><br><span class="line">service:</span><br><span class="line">  ## @param service.type Kubernetes Service type</span><br><span class="line">  ##</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  ## @param service.ports.client Kafka svc port for client connections</span><br><span class="line">  ## @param service.ports.internal Kafka svc port for inter-broker connections</span><br><span class="line">  ## @param service.ports.external Kafka svc port for external connections</span><br><span class="line">  ##</span><br><span class="line">  ports:</span><br><span class="line">    client: 9092</span><br><span class="line">    internal: 9093</span><br><span class="line">    external: 9094</span><br><span class="line">  ## @param service.nodePorts.client Node port for the Kafka client connections</span><br><span class="line">  ## @param service.nodePorts.external Node port for the Kafka external connections</span><br><span class="line">  ## NOTE: choose port between &lt;30000-32767&gt;</span><br><span class="line">  ##</span><br><span class="line">  nodePorts:</span><br><span class="line">    client: &quot;&quot;</span><br><span class="line">    external: &quot;&quot;</span><br><span class="line">  ## @param service.sessionAffinity Control where client requests go, to the same pod or round-robin</span><br><span class="line">  ## Values: ClientIP or None</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/services/</span><br><span class="line">  ##</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  ## @param service.clusterIP Kafka service Cluster IP</span><br><span class="line">  ## e.g.:</span><br><span class="line">  ## clusterIP: None</span><br><span class="line">  ##</span><br><span class="line">  clusterIP: &quot;&quot;</span><br><span class="line">  ## @param service.loadBalancerIP Kafka service Load Balancer IP</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/services/#type-loadbalancer</span><br><span class="line">  ##</span><br><span class="line">  loadBalancerIP: &quot;&quot;</span><br><span class="line">  ## @param service.loadBalancerSourceRanges Kafka service Load Balancer sources</span><br><span class="line">  ## ref: https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## loadBalancerSourceRanges:</span><br><span class="line">  ##   - 10.10.10.0/24</span><br><span class="line">  ##</span><br><span class="line">  loadBalancerSourceRanges: []</span><br><span class="line">  ## @param service.externalTrafficPolicy Kafka service external traffic policy</span><br><span class="line">  ## ref https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip</span><br><span class="line">  ##</span><br><span class="line">  externalTrafficPolicy: Cluster</span><br><span class="line">  ## @param service.annotations Additional custom annotations for Kafka service</span><br><span class="line">  ##</span><br><span class="line">  annotations: &#123;&#125;</span><br><span class="line">  ## @param service.extraPorts Extra ports to expose in the Kafka service (normally used with the `sidecar` value)</span><br><span class="line">  ##</span><br><span class="line">  extraPorts: []</span><br><span class="line">## External Access to Kafka brokers configuration</span><br><span class="line">##</span><br><span class="line">externalAccess:</span><br><span class="line">  ## @param externalAccess.enabled Enable Kubernetes external cluster access to Kafka brokers</span><br><span class="line">  ##</span><br><span class="line">  enabled: true</span><br><span class="line">  ## External IPs auto-discovery configuration</span><br><span class="line">  ## An init container is used to auto-detect LB IPs or node ports by querying the K8s API</span><br><span class="line">  ## Note: RBAC might be required</span><br><span class="line">  ##</span><br><span class="line">  autoDiscovery:</span><br><span class="line">    ## @param externalAccess.autoDiscovery.enabled Enable using an init container to auto-detect external IPs/ports by querying the K8s API</span><br><span class="line">    ##</span><br><span class="line">    enabled: false</span><br><span class="line">    ## Bitnami Kubectl image</span><br><span class="line">    ## ref: https://hub.docker.com/r/bitnami/kubectl/tags/</span><br><span class="line">    ## @param externalAccess.autoDiscovery.image.registry Init container auto-discovery image registry</span><br><span class="line">    ## @param externalAccess.autoDiscovery.image.repository Init container auto-discovery image repository</span><br><span class="line">    ## @param externalAccess.autoDiscovery.image.tag Init container auto-discovery image tag (immutable tags are recommended)</span><br><span class="line">    ## @param externalAccess.autoDiscovery.image.pullPolicy Init container auto-discovery image pull policy</span><br><span class="line">    ## @param externalAccess.autoDiscovery.image.pullSecrets Init container auto-discovery image pull secrets</span><br><span class="line">    ##</span><br><span class="line">    image:</span><br><span class="line">      registry: docker.io</span><br><span class="line">      repository: bitnami/kubectl</span><br><span class="line">      tag: 1.23.3-debian-10-r19</span><br><span class="line">      ## Specify a imagePullPolicy</span><br><span class="line">      ## Defaults to &#x27;Always&#x27; if image tag is &#x27;latest&#x27;, else set to &#x27;IfNotPresent&#x27;</span><br><span class="line">      ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images</span><br><span class="line">      ##</span><br><span class="line">      pullPolicy: IfNotPresent</span><br><span class="line">      ## Optionally specify an array of imagePullSecrets (secrets must be manually created in the namespace)</span><br><span class="line">      ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span><br><span class="line">      ## e.g:</span><br><span class="line">      ## pullSecrets:</span><br><span class="line">      ##   - myRegistryKeySecretName</span><br><span class="line">      ##</span><br><span class="line">      pullSecrets: []</span><br><span class="line">    ## Init Container resource requests and limits</span><br><span class="line">    ## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">    ## @param externalAccess.autoDiscovery.resources.limits The resources limits for the auto-discovery init container</span><br><span class="line">    ## @param externalAccess.autoDiscovery.resources.requests The requested resources for the auto-discovery init container</span><br><span class="line">    ##</span><br><span class="line">    resources:</span><br><span class="line">      limits: &#123;&#125;</span><br><span class="line">      requests: &#123;&#125;</span><br><span class="line">  ## Parameters to configure K8s service(s) used to externally access Kafka brokers</span><br><span class="line">  ## Note: A new service per broker will be created</span><br><span class="line">  ##</span><br><span class="line">  service:</span><br><span class="line">    ## @param externalAccess.service.type Kubernetes Service type for external access. It can be NodePort or LoadBalancer</span><br><span class="line">    ##</span><br><span class="line">    type: NodePort</span><br><span class="line">    ## @param externalAccess.service.ports.external Kafka port used for external access when service type is LoadBalancer</span><br><span class="line">    ##</span><br><span class="line">    ports:</span><br><span class="line">      external: 9094</span><br><span class="line">    ## @param externalAccess.service.loadBalancerIPs Array of load balancer IPs for each Kafka broker. Length must be the same as replicaCount</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## loadBalancerIPs:</span><br><span class="line">    ##   - X.X.X.X</span><br><span class="line">    ##   - Y.Y.Y.Y</span><br><span class="line">    ##</span><br><span class="line">    loadBalancerIPs: []</span><br><span class="line">    ## @param externalAccess.service.loadBalancerNames Array of load balancer Names for each Kafka broker. Length must be the same as replicaCount</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## loadBalancerNames:</span><br><span class="line">    ##   - broker1.external.example.com</span><br><span class="line">    ##   - broker2.external.example.com</span><br><span class="line">    ##</span><br><span class="line">    loadBalancerNames: []</span><br><span class="line">    ## @param externalAccess.service.loadBalancerAnnotations Array of load balancer annotations for each Kafka broker. Length must be the same as replicaCount</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## loadBalancerAnnotations:</span><br><span class="line">    ##   - external-dns.alpha.kubernetes.io/hostname: broker1.external.example.com.</span><br><span class="line">    ##   - external-dns.alpha.kubernetes.io/hostname: broker2.external.example.com.</span><br><span class="line">    ##</span><br><span class="line">    loadBalancerAnnotations: []</span><br><span class="line">    ## @param externalAccess.service.loadBalancerSourceRanges Address(es) that are allowed when service is LoadBalancer</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## loadBalancerSourceRanges:</span><br><span class="line">    ## - 10.10.10.0/24</span><br><span class="line">    ##</span><br><span class="line">    loadBalancerSourceRanges: []</span><br><span class="line">    ## @param externalAccess.service.nodePorts Array of node ports used for each Kafka broker. Length must be the same as replicaCount</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## nodePorts:</span><br><span class="line">    ##   - 30001</span><br><span class="line">    ##   - 30002</span><br><span class="line">    ##</span><br><span class="line">    nodePorts: [30001,30002,30003]</span><br><span class="line">    ## @param externalAccess.service.useHostIPs Use service host IPs to configure Kafka external listener when service type is NodePort</span><br><span class="line">    ##</span><br><span class="line">    useHostIPs: false</span><br><span class="line">    ## @param externalAccess.service.usePodIPs using the MY_POD_IP address for external access.</span><br><span class="line">    ##</span><br><span class="line">    usePodIPs: false</span><br><span class="line">    ## @param externalAccess.service.domain Domain or external ip used to configure Kafka external listener when service type is NodePort</span><br><span class="line">    ## If not specified, the container will try to get the kubernetes node external IP</span><br><span class="line">    ##</span><br><span class="line">    domain: &quot;stage-kafka.info&quot;</span><br><span class="line">    ## @param externalAccess.service.annotations Service annotations for external access</span><br><span class="line">    ##</span><br><span class="line">    annotations: &#123;&#125;</span><br><span class="line">    ## @param externalAccess.service.extraPorts Extra ports to expose in the Kafka external service</span><br><span class="line">    ##</span><br><span class="line">    extraPorts: []</span><br><span class="line">## Network policies</span><br><span class="line">## Ref: https://kubernetes.io/docs/concepts/services-networking/network-policies/</span><br><span class="line">##</span><br><span class="line">networkPolicy:</span><br><span class="line">  ## @param networkPolicy.enabled Specifies whether a NetworkPolicy should be created</span><br><span class="line">  ##</span><br><span class="line">  enabled: false</span><br><span class="line">  ## @param networkPolicy.allowExternal Don&#x27;t require client label for connections</span><br><span class="line">  ## When set to false, only pods with the correct client label will have network access to the port Redis&amp;trade; is</span><br><span class="line">  ## listening on. When true, zookeeper accept connections from any source (with the correct destination port).</span><br><span class="line">  ##</span><br><span class="line">  allowExternal: true</span><br><span class="line">  ## @param networkPolicy.explicitNamespacesSelector A Kubernetes LabelSelector to explicitly select namespaces from which traffic could be allowed</span><br><span class="line">  ## If explicitNamespacesSelector is missing or set to &#123;&#125;, only client Pods that are in the networkPolicy&#x27;s namespace</span><br><span class="line">  ## and that match other criteria, the ones that have the good label, can reach the kafka.</span><br><span class="line">  ## But sometimes, we want the kafka to be accessible to clients from other namespaces, in this case, we can use this</span><br><span class="line">  ## LabelSelector to select these namespaces, note that the networkPolicy&#x27;s namespace should also be explicitly added.</span><br><span class="line">  ##</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## explicitNamespacesSelector:</span><br><span class="line">  ##   matchLabels:</span><br><span class="line">  ##     role: frontend</span><br><span class="line">  ##   matchExpressions:</span><br><span class="line">  ##    - &#123;key: role, operator: In, values: [frontend]&#125;</span><br><span class="line">  ##</span><br><span class="line">  explicitNamespacesSelector: &#123;&#125;</span><br><span class="line">  ## @param networkPolicy.externalAccess.from customize the from section for External Access on tcp-external port</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## - ipBlock:</span><br><span class="line">  ##    cidr: 172.9.0.0/16</span><br><span class="line">  ##    except:</span><br><span class="line">  ##    - 172.9.1.0/24</span><br><span class="line">  ##</span><br><span class="line">  externalAccess:</span><br><span class="line">    from: []</span><br><span class="line">  ## @param networkPolicy.egressRules.customRules [object] Custom network policy rule</span><br><span class="line">  ##</span><br><span class="line">  egressRules:</span><br><span class="line">    ## Additional custom egress rules</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## customRules:</span><br><span class="line">    ##   - to:</span><br><span class="line">    ##       - namespaceSelector:</span><br><span class="line">    ##           matchLabels:</span><br><span class="line">    ##             label: example</span><br><span class="line">    customRules: []</span><br><span class="line"></span><br><span class="line">## @section Persistence parameters</span><br><span class="line"></span><br><span class="line">## Enable persistence using Persistent Volume Claims</span><br><span class="line">## ref: https://kubernetes.io/docs/user-guide/persistent-volumes/</span><br><span class="line">##</span><br><span class="line">persistence:</span><br><span class="line">  ## @param persistence.enabled Enable Kafka data persistence using PVC, note that ZooKeeper persistence is unaffected</span><br><span class="line">  ##</span><br><span class="line">  enabled: true</span><br><span class="line">  ## @param persistence.existingClaim A manually managed Persistent Volume and Claim</span><br><span class="line">  ## If defined, PVC must be created manually before volume will be bound</span><br><span class="line">  ## The value is evaluated as a template</span><br><span class="line">  ##</span><br><span class="line">  existingClaim: &quot;&quot;</span><br><span class="line">  ## @param persistence.storageClass PVC Storage Class for Kafka data volume</span><br><span class="line">  ## If defined, storageClassName: &lt;storageClass&gt;</span><br><span class="line">  ## If set to &quot;-&quot;, storageClassName: &quot;&quot;, which disables dynamic provisioning</span><br><span class="line">  ## If undefined (the default) or set to null, no storageClassName spec is</span><br><span class="line">  ## set, choosing the default provisioner.</span><br><span class="line">  ##</span><br><span class="line">  storageClass: local-storage</span><br><span class="line">  ## @param persistence.accessModes Persistent Volume Access Modes</span><br><span class="line">  ##</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  ## @param persistence.size PVC Storage Request for Kafka data volume</span><br><span class="line">  ##</span><br><span class="line">  size: 5Gi</span><br><span class="line">  ## @param persistence.annotations Annotations for the PVC</span><br><span class="line">  ##</span><br><span class="line">  annotations: &#123;&#125;</span><br><span class="line">  ## @param persistence.selector Selector to match an existing Persistent Volume for Kafka data PVC. If set, the PVC can&#x27;t have a PV dynamically provisioned for it</span><br><span class="line">  ## selector:</span><br><span class="line">  ##   matchLabels:</span><br><span class="line">  ##     app: my-app</span><br><span class="line">  ##</span><br><span class="line">  selector: &#123;&#125;</span><br><span class="line">  ## @param persistence.mountPath Mount path of the Kafka data volume</span><br><span class="line">  ##</span><br><span class="line">  mountPath: /bitnami/kafka</span><br><span class="line">## Log Persistence parameters</span><br><span class="line">##</span><br><span class="line">logPersistence:</span><br><span class="line">  ## @param logPersistence.enabled Enable Kafka logs persistence using PVC, note that ZooKeeper persistence is unaffected</span><br><span class="line">  ##</span><br><span class="line">  enabled: false</span><br><span class="line">  ## @param logPersistence.existingClaim A manually managed Persistent Volume and Claim</span><br><span class="line">  ## If defined, PVC must be created manually before volume will be bound</span><br><span class="line">  ## The value is evaluated as a template</span><br><span class="line">  ##</span><br><span class="line">  existingClaim: &quot;&quot;</span><br><span class="line">  ## @param logPersistence.storageClass PVC Storage Class for Kafka logs volume</span><br><span class="line">  ## If defined, storageClassName: &lt;storageClass&gt;</span><br><span class="line">  ## If set to &quot;-&quot;, storageClassName: &quot;&quot;, which disables dynamic provisioning</span><br><span class="line">  ## If undefined (the default) or set to null, no storageClassName spec is</span><br><span class="line">  ## set, choosing the default provisioner.</span><br><span class="line">  ##</span><br><span class="line">  storageClass: &quot;&quot;</span><br><span class="line">  ## @param logPersistence.accessModes Persistent Volume Access Modes</span><br><span class="line">  ##</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  ## @param logPersistence.size PVC Storage Request for Kafka logs volume</span><br><span class="line">  ##</span><br><span class="line">  size: 5Gi</span><br><span class="line">  ## @param logPersistence.annotations Annotations for the PVC</span><br><span class="line">  ##</span><br><span class="line">  annotations: &#123;&#125;</span><br><span class="line">  ## @param logPersistence.selector Selector to match an existing Persistent Volume for Kafka log data PVC. If set, the PVC can&#x27;t have a PV dynamically provisioned for it</span><br><span class="line">  ## selector:</span><br><span class="line">  ##   matchLabels:</span><br><span class="line">  ##     app: my-app</span><br><span class="line">  ##</span><br><span class="line">  selector: &#123;&#125;</span><br><span class="line">  ## @param logPersistence.mountPath Mount path of the Kafka logs volume</span><br><span class="line">  ##</span><br><span class="line">  mountPath: /opt/bitnami/kafka/logs</span><br><span class="line"></span><br><span class="line">## @section Volume Permissions parameters</span><br><span class="line">##</span><br><span class="line"></span><br><span class="line">## Init containers parameters:</span><br><span class="line">## volumePermissions: Change the owner and group of the persistent volume(s) mountpoint(s) to &#x27;runAsUser:fsGroup&#x27; on each node</span><br><span class="line">##</span><br><span class="line">volumePermissions:</span><br><span class="line">  ## @param volumePermissions.enabled Enable init container that changes the owner and group of the persistent volume</span><br><span class="line">  ##</span><br><span class="line">  enabled: false</span><br><span class="line">  ## @param volumePermissions.image.registry Init container volume-permissions image registry</span><br><span class="line">  ## @param volumePermissions.image.repository Init container volume-permissions image repository</span><br><span class="line">  ## @param volumePermissions.image.tag Init container volume-permissions image tag (immutable tags are recommended)</span><br><span class="line">  ## @param volumePermissions.image.pullPolicy Init container volume-permissions image pull policy</span><br><span class="line">  ## @param volumePermissions.image.pullSecrets Init container volume-permissions image pull secrets</span><br><span class="line">  ##</span><br><span class="line">  image:</span><br><span class="line">    registry: docker.io</span><br><span class="line">    repository: bitnami/bitnami-shell</span><br><span class="line">    tag: 10-debian-10-r339</span><br><span class="line">    pullPolicy: IfNotPresent</span><br><span class="line">    ## Optionally specify an array of imagePullSecrets.</span><br><span class="line">    ## Secrets must be manually created in the namespace.</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span><br><span class="line">    ## Example:</span><br><span class="line">    ## pullSecrets:</span><br><span class="line">    ##   - myRegistryKeySecretName</span><br><span class="line">    ##</span><br><span class="line">    pullSecrets: []</span><br><span class="line">  ## Init container resource requests and limits</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">  ## @param volumePermissions.resources.limits Init container volume-permissions resource limits</span><br><span class="line">  ## @param volumePermissions.resources.requests Init container volume-permissions resource requests</span><br><span class="line">  ##</span><br><span class="line">  resources:</span><br><span class="line">    limits: &#123;&#125;</span><br><span class="line">    requests: &#123;&#125;</span><br><span class="line">  ## Init container&#x27; Security Context</span><br><span class="line">  ## Note: the chown of the data folder is done to containerSecurityContext.runAsUser</span><br><span class="line">  ## and not the below volumePermissions.containerSecurityContext.runAsUser</span><br><span class="line">  ## @param volumePermissions.containerSecurityContext.runAsUser User ID for the init container</span><br><span class="line">  ##</span><br><span class="line">  containerSecurityContext:</span><br><span class="line">    runAsUser: 0</span><br><span class="line"></span><br><span class="line">## @section Other Parameters</span><br><span class="line"></span><br><span class="line">## ServiceAccount for Kafka</span><br><span class="line">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/</span><br><span class="line">##</span><br><span class="line">serviceAccount:</span><br><span class="line">  ## @param serviceAccount.create Enable creation of ServiceAccount for Kafka pods</span><br><span class="line">  ##</span><br><span class="line">  create: true</span><br><span class="line">  ## @param serviceAccount.name The name of the service account to use. If not set and `create` is `true`, a name is generated</span><br><span class="line">  ## If not set and create is true, a name is generated using the kafka.serviceAccountName template</span><br><span class="line">  ##</span><br><span class="line">  name: &quot;&quot;</span><br><span class="line">  ## @param serviceAccount.automountServiceAccountToken Allows auto mount of ServiceAccountToken on the serviceAccount created</span><br><span class="line">  ## Can be set to false if pods using this serviceAccount do not need to use K8s API</span><br><span class="line">  ##</span><br><span class="line">  automountServiceAccountToken: true</span><br><span class="line">  ## @param serviceAccount.annotations Additional custom annotations for the ServiceAccount</span><br><span class="line">  ##</span><br><span class="line">  annotations: &#123;&#125;</span><br><span class="line">## Role Based Access Control</span><br><span class="line">## ref: https://kubernetes.io/docs/admin/authorization/rbac/</span><br><span class="line">##</span><br><span class="line">rbac:</span><br><span class="line">  ## @param rbac.create Whether to create &amp;amp; use RBAC resources or not</span><br><span class="line">  ## binding Kafka ServiceAccount to a role</span><br><span class="line">  ## that allows Kafka pods querying the K8s API</span><br><span class="line">  ##</span><br><span class="line">  create: false</span><br><span class="line"></span><br><span class="line">## @section Metrics parameters</span><br><span class="line"></span><br><span class="line">## Prometheus Exporters / Metrics</span><br><span class="line">##</span><br><span class="line">metrics:</span><br><span class="line">  ## Prometheus Kafka exporter: exposes complimentary metrics to JMX exporter</span><br><span class="line">  ##</span><br><span class="line">  kafka:</span><br><span class="line">    ## @param metrics.kafka.enabled Whether or not to create a standalone Kafka exporter to expose Kafka metrics</span><br><span class="line">    ##</span><br><span class="line">    enabled: false</span><br><span class="line">    ## Bitnami Kafka exporter image</span><br><span class="line">    ## ref: https://hub.docker.com/r/bitnami/kafka-exporter/tags/</span><br><span class="line">    ## @param metrics.kafka.image.registry Kafka exporter image registry</span><br><span class="line">    ## @param metrics.kafka.image.repository Kafka exporter image repository</span><br><span class="line">    ## @param metrics.kafka.image.tag Kafka exporter image tag (immutable tags are recommended)</span><br><span class="line">    ## @param metrics.kafka.image.pullPolicy Kafka exporter image pull policy</span><br><span class="line">    ## @param metrics.kafka.image.pullSecrets Specify docker-registry secret names as an array</span><br><span class="line">    ##</span><br><span class="line">    image:</span><br><span class="line">      registry: docker.io</span><br><span class="line">      repository: bitnami/kafka-exporter</span><br><span class="line">      tag: 1.4.2-debian-10-r147</span><br><span class="line">      ## Specify a imagePullPolicy</span><br><span class="line">      ## Defaults to &#x27;Always&#x27; if image tag is &#x27;latest&#x27;, else set to &#x27;IfNotPresent&#x27;</span><br><span class="line">      ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images</span><br><span class="line">      ##</span><br><span class="line">      pullPolicy: IfNotPresent</span><br><span class="line">      ## Optionally specify an array of imagePullSecrets (secrets must be manually created in the namespace)</span><br><span class="line">      ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span><br><span class="line">      ## e.g:</span><br><span class="line">      ## pullSecrets:</span><br><span class="line">      ##   - myRegistryKeySecretName</span><br><span class="line">      ##</span><br><span class="line">      pullSecrets: []</span><br><span class="line"></span><br><span class="line">    ## @param metrics.kafka.certificatesSecret Name of the existing secret containing the optional certificate and key files</span><br><span class="line">    ## for Kafka exporter client authentication</span><br><span class="line">    ##</span><br><span class="line">    certificatesSecret: &quot;&quot;</span><br><span class="line">    ## @param metrics.kafka.tlsCert The secret key from the certificatesSecret if &#x27;client-cert&#x27; key different from the default (cert-file)</span><br><span class="line">    ##</span><br><span class="line">    tlsCert: cert-file</span><br><span class="line">    ## @param metrics.kafka.tlsKey The secret key from the certificatesSecret if &#x27;client-key&#x27; key different from the default (key-file)</span><br><span class="line">    ##</span><br><span class="line">    tlsKey: key-file</span><br><span class="line">    ## @param metrics.kafka.tlsCaSecret Name of the existing secret containing the optional ca certificate for Kafka exporter client authentication</span><br><span class="line">    ##</span><br><span class="line">    tlsCaSecret: &quot;&quot;</span><br><span class="line">    ## @param metrics.kafka.tlsCaCert The secret key from the certificatesSecret or tlsCaSecret if &#x27;ca-cert&#x27; key different from the default (ca-file)</span><br><span class="line">    ##</span><br><span class="line">    tlsCaCert: ca-file</span><br><span class="line">    ## @param metrics.kafka.extraFlags Extra flags to be passed to Kafka exporter</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## extraFlags:</span><br><span class="line">    ##   tls.insecure-skip-tls-verify: &quot;&quot;</span><br><span class="line">    ##   web.telemetry-path: &quot;/metrics&quot;</span><br><span class="line">    ##</span><br><span class="line">    extraFlags: &#123;&#125;</span><br><span class="line">    ## @param metrics.kafka.command Override Kafka exporter container command</span><br><span class="line">    ##</span><br><span class="line">    command: []</span><br><span class="line">    ## @param metrics.kafka.args Override Kafka exporter container arguments</span><br><span class="line">    ##</span><br><span class="line">    args: []</span><br><span class="line">    ## @param metrics.kafka.containerPorts.metrics Kafka exporter metrics container port</span><br><span class="line">    ##</span><br><span class="line">    containerPorts:</span><br><span class="line">      metrics: 9308</span><br><span class="line">    ## Kafka exporter resource requests and limits</span><br><span class="line">    ## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">    ## @param metrics.kafka.resources.limits The resources limits for the container</span><br><span class="line">    ## @param metrics.kafka.resources.requests The requested resources for the container</span><br><span class="line">    ##</span><br><span class="line">    resources:</span><br><span class="line">      limits: &#123;&#125;</span><br><span class="line">      requests: &#123;&#125;</span><br><span class="line">    ## Kafka exporter pods&#x27; Security Context</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod</span><br><span class="line">    ## @param metrics.kafka.podSecurityContext.enabled Enable security context for the pods</span><br><span class="line">    ## @param metrics.kafka.podSecurityContext.fsGroup Set Kafka exporter pod&#x27;s Security Context fsGroup</span><br><span class="line">    ##</span><br><span class="line">    podSecurityContext:</span><br><span class="line">      enabled: true</span><br><span class="line">      fsGroup: 1001</span><br><span class="line">    ## Kafka exporter containers&#x27; Security Context</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container</span><br><span class="line">    ## @param metrics.kafka.containerSecurityContext.enabled Enable Kafka exporter containers&#x27; Security Context</span><br><span class="line">    ## @param metrics.kafka.containerSecurityContext.runAsUser Set Kafka exporter containers&#x27; Security Context runAsUser</span><br><span class="line">    ## @param metrics.kafka.containerSecurityContext.runAsNonRoot Set Kafka exporter containers&#x27; Security Context runAsNonRoot</span><br><span class="line">    ## e.g:</span><br><span class="line">    ##   containerSecurityContext:</span><br><span class="line">    ##     enabled: true</span><br><span class="line">    ##     capabilities:</span><br><span class="line">    ##       drop: [&quot;NET_RAW&quot;]</span><br><span class="line">    ##     readOnlyRootFilesystem: true</span><br><span class="line">    ##</span><br><span class="line">    containerSecurityContext:</span><br><span class="line">      enabled: true</span><br><span class="line">      runAsUser: 1001</span><br><span class="line">      runAsNonRoot: true</span><br><span class="line">    ## @param metrics.kafka.hostAliases Kafka exporter pods host aliases</span><br><span class="line">    ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/</span><br><span class="line">    ##</span><br><span class="line">    hostAliases: []</span><br><span class="line">    ## @param metrics.kafka.podLabels Extra labels for Kafka exporter pods</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/</span><br><span class="line">    ##</span><br><span class="line">    podLabels: &#123;&#125;</span><br><span class="line">    ## @param metrics.kafka.podAnnotations Extra annotations for Kafka exporter pods</span><br><span class="line">    ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/</span><br><span class="line">    ##</span><br><span class="line">    podAnnotations: &#123;&#125;</span><br><span class="line">    ## @param metrics.kafka.podAffinityPreset Pod affinity preset. Ignored if `metrics.kafka.affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">    ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity</span><br><span class="line">    ##</span><br><span class="line">    podAffinityPreset: &quot;&quot;</span><br><span class="line">    ## @param metrics.kafka.podAntiAffinityPreset Pod anti-affinity preset. Ignored if `metrics.kafka.affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity</span><br><span class="line">    ##</span><br><span class="line">    podAntiAffinityPreset: soft</span><br><span class="line">    ## Node metrics.kafka.affinity preset</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity</span><br><span class="line">    ##</span><br><span class="line">    nodeAffinityPreset:</span><br><span class="line">      ## @param metrics.kafka.nodeAffinityPreset.type Node affinity preset type. Ignored if `metrics.kafka.affinity` is set. Allowed values: `soft` or `hard`</span><br><span class="line">      ##</span><br><span class="line">      type: &quot;&quot;</span><br><span class="line">      ## @param metrics.kafka.nodeAffinityPreset.key Node label key to match Ignored if `metrics.kafka.affinity` is set.</span><br><span class="line">      ## E.g.</span><br><span class="line">      ## key: &quot;kubernetes.io/e2e-az-name&quot;</span><br><span class="line">      ##</span><br><span class="line">      key: &quot;&quot;</span><br><span class="line">      ## @param metrics.kafka.nodeAffinityPreset.values Node label values to match. Ignored if `metrics.kafka.affinity` is set.</span><br><span class="line">      ## E.g.</span><br><span class="line">      ## values:</span><br><span class="line">      ##   - e2e-az1</span><br><span class="line">      ##   - e2e-az2</span><br><span class="line">      ##</span><br><span class="line">      values: []</span><br><span class="line">    ## @param metrics.kafka.affinity Affinity for pod assignment</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity</span><br><span class="line">    ## Note: metrics.kafka.podAffinityPreset, metrics.kafka.podAntiAffinityPreset, and metrics.kafka.nodeAffinityPreset will be ignored when it&#x27;s set</span><br><span class="line">    ##</span><br><span class="line">    affinity: &#123;&#125;</span><br><span class="line">    ## @param metrics.kafka.nodeSelector Node labels for pod assignment</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/user-guide/node-selection/</span><br><span class="line">    ##</span><br><span class="line">    nodeSelector: &#123;&#125;</span><br><span class="line">    ## @param metrics.kafka.tolerations Tolerations for pod assignment</span><br><span class="line">    ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/</span><br><span class="line">    ##</span><br><span class="line">    tolerations: []</span><br><span class="line">    ## @param metrics.kafka.schedulerName Name of the k8s scheduler (other than default) for Kafka exporter</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/</span><br><span class="line">    ##</span><br><span class="line">    schedulerName: &quot;&quot;</span><br><span class="line">    ## @param metrics.kafka.extraVolumes Optionally specify extra list of additional volumes for the Kafka exporter pod(s)</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## extraVolumes:</span><br><span class="line">    ##   - name: kafka-jaas</span><br><span class="line">    ##     secret:</span><br><span class="line">    ##       secretName: kafka-jaas</span><br><span class="line">    ##</span><br><span class="line">    extraVolumes: []</span><br><span class="line">    ## @param metrics.kafka.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the Kafka exporter container(s)</span><br><span class="line">    ## extraVolumeMounts:</span><br><span class="line">    ##   - name: kafka-jaas</span><br><span class="line">    ##     mountPath: /bitnami/kafka/config/kafka_jaas.conf</span><br><span class="line">    ##     subPath: kafka_jaas.conf</span><br><span class="line">    ##</span><br><span class="line">    extraVolumeMounts: []</span><br><span class="line">    ## @param metrics.kafka.sidecars Add additional sidecar containers to the Kafka exporter pod(s)</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## sidecars:</span><br><span class="line">    ##   - name: your-image-name</span><br><span class="line">    ##     image: your-image</span><br><span class="line">    ##     imagePullPolicy: Always</span><br><span class="line">    ##     ports:</span><br><span class="line">    ##       - name: portname</span><br><span class="line">    ##         containerPort: 1234</span><br><span class="line">    ##</span><br><span class="line">    sidecars: []</span><br><span class="line">    ## @param metrics.kafka.initContainers Add init containers to the Kafka exporter pods</span><br><span class="line">    ## e.g:</span><br><span class="line">    ## initContainers:</span><br><span class="line">    ##   - name: your-image-name</span><br><span class="line">    ##     image: your-image</span><br><span class="line">    ##     imagePullPolicy: Always</span><br><span class="line">    ##     ports:</span><br><span class="line">    ##       - name: portname</span><br><span class="line">    ##         containerPort: 1234</span><br><span class="line">    ##</span><br><span class="line">    initContainers: []</span><br><span class="line">    ## Kafka exporter service configuration</span><br><span class="line">    ##</span><br><span class="line">    service:</span><br><span class="line">      ## @param metrics.kafka.service.ports.metrics Kafka exporter metrics service port</span><br><span class="line">      ##</span><br><span class="line">      ports:</span><br><span class="line">        metrics: 9308</span><br><span class="line">      ## @param metrics.kafka.service.clusterIP Static clusterIP or None for headless services</span><br><span class="line">      ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#choosing-your-own-ip-address</span><br><span class="line">      ##</span><br><span class="line">      clusterIP: &quot;&quot;</span><br><span class="line">      ## @param metrics.kafka.service.sessionAffinity Control where client requests go, to the same pod or round-robin</span><br><span class="line">      ## Values: ClientIP or None</span><br><span class="line">      ## ref: https://kubernetes.io/docs/user-guide/services/</span><br><span class="line">      ##</span><br><span class="line">      sessionAffinity: None</span><br><span class="line">      ## @param metrics.kafka.service.annotations [object] Annotations for the Kafka exporter service</span><br><span class="line">      ##</span><br><span class="line">      annotations:</span><br><span class="line">        prometheus.io/scrape: &quot;true&quot;</span><br><span class="line">        prometheus.io/port: &quot;&#123;&#123; .Values.metrics.kafka.service.ports.metrics &#125;&#125;&quot;</span><br><span class="line">        prometheus.io/path: &quot;/metrics&quot;</span><br><span class="line">    ## Kafka exporter pods ServiceAccount</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/</span><br><span class="line">    ##</span><br><span class="line">    serviceAccount:</span><br><span class="line">      ## @param metrics.kafka.serviceAccount.create Enable creation of ServiceAccount for Kafka exporter pods</span><br><span class="line">      ##</span><br><span class="line">      create: true</span><br><span class="line">      ## @param metrics.kafka.serviceAccount.name The name of the service account to use. If not set and `create` is `true`, a name is generated</span><br><span class="line">      ## If not set and create is true, a name is generated using the kafka.metrics.kafka.serviceAccountName template</span><br><span class="line">      ##</span><br><span class="line">      name: &quot;&quot;</span><br><span class="line">      ## @param metrics.kafka.serviceAccount.automountServiceAccountToken Allows auto mount of ServiceAccountToken on the serviceAccount created</span><br><span class="line">      ## Can be set to false if pods using this serviceAccount do not need to use K8s API</span><br><span class="line">      ##</span><br><span class="line">      automountServiceAccountToken: true</span><br><span class="line">  ## Prometheus JMX exporter: exposes the majority of Kafkas metrics</span><br><span class="line">  ##</span><br><span class="line">  jmx:</span><br><span class="line">    ## @param metrics.jmx.enabled Whether or not to expose JMX metrics to Prometheus</span><br><span class="line">    ##</span><br><span class="line">    enabled: false</span><br><span class="line">    ## Bitnami JMX exporter image</span><br><span class="line">    ## ref: https://hub.docker.com/r/bitnami/jmx-exporter/tags/</span><br><span class="line">    ## @param metrics.jmx.image.registry JMX exporter image registry</span><br><span class="line">    ## @param metrics.jmx.image.repository JMX exporter image repository</span><br><span class="line">    ## @param metrics.jmx.image.tag JMX exporter image tag (immutable tags are recommended)</span><br><span class="line">    ## @param metrics.jmx.image.pullPolicy JMX exporter image pull policy</span><br><span class="line">    ## @param metrics.jmx.image.pullSecrets Specify docker-registry secret names as an array</span><br><span class="line">    ##</span><br><span class="line">    image:</span><br><span class="line">      registry: docker.io</span><br><span class="line">      repository: bitnami/jmx-exporter</span><br><span class="line">      tag: 0.16.1-debian-10-r208</span><br><span class="line">      ## Specify a imagePullPolicy</span><br><span class="line">      ## Defaults to &#x27;Always&#x27; if image tag is &#x27;latest&#x27;, else set to &#x27;IfNotPresent&#x27;</span><br><span class="line">      ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images</span><br><span class="line">      ##</span><br><span class="line">      pullPolicy: IfNotPresent</span><br><span class="line">      ## Optionally specify an array of imagePullSecrets (secrets must be manually created in the namespace)</span><br><span class="line">      ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span><br><span class="line">      ## e.g:</span><br><span class="line">      ## pullSecrets:</span><br><span class="line">      ##   - myRegistryKeySecretName</span><br><span class="line">      ##</span><br><span class="line">      pullSecrets: []</span><br><span class="line">    ## Prometheus JMX exporter containers&#x27; Security Context</span><br><span class="line">    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container</span><br><span class="line">    ## @param metrics.jmx.containerSecurityContext.enabled Enable Prometheus JMX exporter containers&#x27; Security Context</span><br><span class="line">    ## @param metrics.jmx.containerSecurityContext.runAsUser Set Prometheus JMX exporter containers&#x27; Security Context runAsUser</span><br><span class="line">    ## @param metrics.jmx.containerSecurityContext.runAsNonRoot Set Prometheus JMX exporter containers&#x27; Security Context runAsNonRoot</span><br><span class="line">    ## e.g:</span><br><span class="line">    ##   containerSecurityContext:</span><br><span class="line">    ##     enabled: true</span><br><span class="line">    ##     capabilities:</span><br><span class="line">    ##       drop: [&quot;NET_RAW&quot;]</span><br><span class="line">    ##     readOnlyRootFilesystem: true</span><br><span class="line">    ##</span><br><span class="line">    containerSecurityContext:</span><br><span class="line">      enabled: true</span><br><span class="line">      runAsUser: 1001</span><br><span class="line">      runAsNonRoot: true</span><br><span class="line">    ## @param metrics.jmx.containerPorts.metrics Prometheus JMX exporter metrics container port</span><br><span class="line">    ##</span><br><span class="line">    containerPorts:</span><br><span class="line">      metrics: 5556</span><br><span class="line">    ## Prometheus JMX exporter resource requests and limits</span><br><span class="line">    ## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">    ## @param metrics.jmx.resources.limits The resources limits for the JMX exporter container</span><br><span class="line">    ## @param metrics.jmx.resources.requests The requested resources for the JMX exporter container</span><br><span class="line">    ##</span><br><span class="line">    resources:</span><br><span class="line">      limits: &#123;&#125;</span><br><span class="line">      requests: &#123;&#125;</span><br><span class="line">    ## Prometheus JMX exporter service configuration</span><br><span class="line">    ##</span><br><span class="line">    service:</span><br><span class="line">      ## @param metrics.jmx.service.ports.metrics Prometheus JMX exporter metrics service port</span><br><span class="line">      ##</span><br><span class="line">      ports:</span><br><span class="line">        metrics: 5556</span><br><span class="line">      ## @param metrics.jmx.service.clusterIP Static clusterIP or None for headless services</span><br><span class="line">      ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#choosing-your-own-ip-address</span><br><span class="line">      ##</span><br><span class="line">      clusterIP: &quot;&quot;</span><br><span class="line">      ## @param metrics.jmx.service.sessionAffinity Control where client requests go, to the same pod or round-robin</span><br><span class="line">      ## Values: ClientIP or None</span><br><span class="line">      ## ref: https://kubernetes.io/docs/user-guide/services/</span><br><span class="line">      ##</span><br><span class="line">      sessionAffinity: None</span><br><span class="line">      ## @param metrics.jmx.service.annotations [object] Annotations for the Prometheus JMX exporter service</span><br><span class="line">      ##</span><br><span class="line">      annotations:</span><br><span class="line">        prometheus.io/scrape: &quot;true&quot;</span><br><span class="line">        prometheus.io/port: &quot;&#123;&#123; .Values.metrics.jmx.service.ports.metrics &#125;&#125;&quot;</span><br><span class="line">        prometheus.io/path: &quot;/&quot;</span><br><span class="line">    ## @param metrics.jmx.whitelistObjectNames Allows setting which JMX objects you want to expose to via JMX stats to JMX exporter</span><br><span class="line">    ## Only whitelisted values will be exposed via JMX exporter. They must also be exposed via Rules. To expose all metrics</span><br><span class="line">    ## (warning its crazy excessive and they aren&#x27;t formatted in a prometheus style) (1) `whitelistObjectNames: []`</span><br><span class="line">    ## (2) commented out above `overrideConfig`.</span><br><span class="line">    ##</span><br><span class="line">    whitelistObjectNames:</span><br><span class="line">      - kafka.controller:*</span><br><span class="line">      - kafka.server:*</span><br><span class="line">      - java.lang:*</span><br><span class="line">      - kafka.network:*</span><br><span class="line">      - kafka.log:*</span><br><span class="line">    ## @param metrics.jmx.config [string] Configuration file for JMX exporter</span><br><span class="line">    ## Specify content for jmx-kafka-prometheus.yml. Evaluated as a template</span><br><span class="line">    ##</span><br><span class="line">    ## Credits to the incubator/kafka chart for the JMX configuration.</span><br><span class="line">    ## https://github.com/helm/charts/tree/master/incubator/kafka</span><br><span class="line">    ##</span><br><span class="line">    config: |-</span><br><span class="line">      jmxUrl: service:jmx:rmi:///jndi/rmi://127.0.0.1:5555/jmxrmi</span><br><span class="line">      lowercaseOutputName: true</span><br><span class="line">      lowercaseOutputLabelNames: true</span><br><span class="line">      ssl: false</span><br><span class="line">      &#123;&#123;- if .Values.metrics.jmx.whitelistObjectNames &#125;&#125;</span><br><span class="line">      whitelistObjectNames: [&quot;&#123;&#123; join &quot;\&quot;,\&quot;&quot; .Values.metrics.jmx.whitelistObjectNames &#125;&#125;&quot;]</span><br><span class="line">      &#123;&#123;- end &#125;&#125;</span><br><span class="line">    ## @param metrics.jmx.existingConfigmap Name of existing ConfigMap with JMX exporter configuration</span><br><span class="line">    ## NOTE: This will override metrics.jmx.config</span><br><span class="line">    ##</span><br><span class="line">    existingConfigmap: &quot;&quot;</span><br><span class="line">  ## Prometheus Operator ServiceMonitor configuration</span><br><span class="line">  ##</span><br><span class="line">  serviceMonitor:</span><br><span class="line">    ## @param metrics.serviceMonitor.enabled if `true`, creates a Prometheus Operator ServiceMonitor (requires `metrics.kafka.enabled` or `metrics.jmx.enabled` to be `true`)</span><br><span class="line">    ##</span><br><span class="line">    enabled: false</span><br><span class="line">    ## @param metrics.serviceMonitor.namespace Namespace in which Prometheus is running</span><br><span class="line">    ##</span><br><span class="line">    namespace: &quot;&quot;</span><br><span class="line">    ## @param metrics.serviceMonitor.interval Interval at which metrics should be scraped</span><br><span class="line">    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint</span><br><span class="line">    ##</span><br><span class="line">    interval: &quot;&quot;</span><br><span class="line">    ## @param metrics.serviceMonitor.scrapeTimeout Timeout after which the scrape is ended</span><br><span class="line">    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint</span><br><span class="line">    ##</span><br><span class="line">    scrapeTimeout: &quot;&quot;</span><br><span class="line">    ## @param metrics.serviceMonitor.labels Additional labels that can be used so ServiceMonitor will be discovered by Prometheus</span><br><span class="line">    ##</span><br><span class="line">    labels: &#123;&#125;</span><br><span class="line">    ## @param metrics.serviceMonitor.selector Prometheus instance selector labels</span><br><span class="line">    ## ref: https://github.com/bitnami/charts/tree/master/bitnami/prometheus-operator#prometheus-configuration</span><br><span class="line">    ##</span><br><span class="line">    selector: &#123;&#125;</span><br><span class="line">    ## @param metrics.serviceMonitor.relabelings RelabelConfigs to apply to samples before scraping</span><br><span class="line">    ##</span><br><span class="line">    relabelings: []</span><br><span class="line">    ## @param metrics.serviceMonitor.metricRelabelings MetricRelabelConfigs to apply to samples before ingestion</span><br><span class="line">    ##</span><br><span class="line">    metricRelabelings: []</span><br><span class="line">    ## @param metrics.serviceMonitor.honorLabels Specify honorLabels parameter to add the scrape endpoint</span><br><span class="line">    ##</span><br><span class="line">    honorLabels: false</span><br><span class="line">    ## @param metrics.serviceMonitor.jobLabel The name of the label on the target service to use as the job name in prometheus.</span><br><span class="line">    ##</span><br><span class="line">    jobLabel: &quot;&quot;</span><br><span class="line"></span><br><span class="line">## @section Kafka provisioning parameters</span><br><span class="line"></span><br><span class="line">## Kafka provisioning</span><br><span class="line">##</span><br><span class="line">provisioning:</span><br><span class="line">  ## @param provisioning.enabled Enable kafka provisioning Job</span><br><span class="line">  ##</span><br><span class="line">  enabled: false</span><br><span class="line">  ## @param provisioning.numPartitions Default number of partitions for topics when unspecified</span><br><span class="line">  ##</span><br><span class="line">  numPartitions: 1</span><br><span class="line">  ## @param provisioning.replicationFactor Default replication factor for topics when unspecified</span><br><span class="line">  ##</span><br><span class="line">  replicationFactor: 1</span><br><span class="line">  ## @param provisioning.topics Kafka provisioning topics</span><br><span class="line">  ## - name: topic-name</span><br><span class="line">  ##   partitions: 1</span><br><span class="line">  ##   replicationFactor: 1</span><br><span class="line">  ##   ## https://kafka.apache.org/documentation/#topicconfigs</span><br><span class="line">  ##   config:</span><br><span class="line">  ##     max.message.bytes: 64000</span><br><span class="line">  ##     flush.messages: 1</span><br><span class="line">  ##</span><br><span class="line">  topics: []</span><br><span class="line">  ## @param provisioning.command Override provisioning container command</span><br><span class="line">  ##</span><br><span class="line">  command: []</span><br><span class="line">  ## @param provisioning.args Override provisioning container arguments</span><br><span class="line">  ##</span><br><span class="line">  args: []</span><br><span class="line">  ## @param provisioning.podAnnotations Extra annotations for Kafka provisioning pods</span><br><span class="line">  ##</span><br><span class="line">  podAnnotations: &#123;&#125;</span><br><span class="line">  ## @param provisioning.podLabels Extra labels for Kafka provisioning pods</span><br><span class="line">  ## Ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/</span><br><span class="line">  ##</span><br><span class="line">  podLabels: &#123;&#125;</span><br><span class="line">  ## Kafka provisioning resource requests and limits</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/</span><br><span class="line">  ## @param provisioning.resources.limits The resources limits for the Kafka provisioning container</span><br><span class="line">  ## @param provisioning.resources.requests The requested resources for the Kafka provisioning container</span><br><span class="line">  ##</span><br><span class="line">  resources:</span><br><span class="line">    limits: &#123;&#125;</span><br><span class="line">    requests: &#123;&#125;</span><br><span class="line">  ## Kafka provisioning pods&#x27; Security Context</span><br><span class="line">  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod</span><br><span class="line">  ## @param provisioning.podSecurityContext.enabled Enable security context for the pods</span><br><span class="line">  ## @param provisioning.podSecurityContext.fsGroup Set Kafka provisioning pod&#x27;s Security Context fsGroup</span><br><span class="line">  ##</span><br><span class="line">  podSecurityContext:</span><br><span class="line">    enabled: true</span><br><span class="line">    fsGroup: 1001</span><br><span class="line">  ## Kafka provisioning containers&#x27; Security Context</span><br><span class="line">  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container</span><br><span class="line">  ## @param provisioning.containerSecurityContext.enabled Enable Kafka provisioning containers&#x27; Security Context</span><br><span class="line">  ## @param provisioning.containerSecurityContext.runAsUser Set Kafka provisioning containers&#x27; Security Context runAsUser</span><br><span class="line">  ## @param provisioning.containerSecurityContext.runAsNonRoot Set Kafka provisioning containers&#x27; Security Context runAsNonRoot</span><br><span class="line">  ## e.g:</span><br><span class="line">  ##   containerSecurityContext:</span><br><span class="line">  ##     enabled: true</span><br><span class="line">  ##     capabilities:</span><br><span class="line">  ##       drop: [&quot;NET_RAW&quot;]</span><br><span class="line">  ##     readOnlyRootFilesystem: true</span><br><span class="line">  ##</span><br><span class="line">  containerSecurityContext:</span><br><span class="line">    enabled: true</span><br><span class="line">    runAsUser: 1001</span><br><span class="line">    runAsNonRoot: true</span><br><span class="line">  ## @param provisioning.schedulerName Name of the k8s scheduler (other than default) for kafka provisioning</span><br><span class="line">  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/</span><br><span class="line">  ##</span><br><span class="line">  schedulerName: &quot;&quot;</span><br><span class="line">  ## @param provisioning.extraVolumes Optionally specify extra list of additional volumes for the Kafka provisioning pod(s)</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## extraVolumes:</span><br><span class="line">  ##   - name: kafka-jaas</span><br><span class="line">  ##     secret:</span><br><span class="line">  ##       secretName: kafka-jaas</span><br><span class="line">  ##</span><br><span class="line">  extraVolumes: []</span><br><span class="line">  ## @param provisioning.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the Kafka provisioning container(s)</span><br><span class="line">  ## extraVolumeMounts:</span><br><span class="line">  ##   - name: kafka-jaas</span><br><span class="line">  ##     mountPath: /bitnami/kafka/config/kafka_jaas.conf</span><br><span class="line">  ##     subPath: kafka_jaas.conf</span><br><span class="line">  ##</span><br><span class="line">  extraVolumeMounts: []</span><br><span class="line">  ## @param provisioning.sidecars Add additional sidecar containers to the Kafka provisioning pod(s)</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## sidecars:</span><br><span class="line">  ##   - name: your-image-name</span><br><span class="line">  ##     image: your-image</span><br><span class="line">  ##     imagePullPolicy: Always</span><br><span class="line">  ##     ports:</span><br><span class="line">  ##       - name: portname</span><br><span class="line">  ##         containerPort: 1234</span><br><span class="line">  ##</span><br><span class="line">  sidecars: []</span><br><span class="line">  ## @param provisioning.initContainers Add additional Add init containers to the Kafka provisioning pod(s)</span><br><span class="line">  ## e.g:</span><br><span class="line">  ## initContainers:</span><br><span class="line">  ##   - name: your-image-name</span><br><span class="line">  ##     image: your-image</span><br><span class="line">  ##     imagePullPolicy: Always</span><br><span class="line">  ##     ports:</span><br><span class="line">  ##       - name: portname</span><br><span class="line">  ##         containerPort: 1234</span><br><span class="line">  ##</span><br><span class="line">  initContainers: []</span><br><span class="line"></span><br><span class="line">## @section ZooKeeper chart parameters</span><br><span class="line"></span><br><span class="line">## ZooKeeper chart configuration</span><br><span class="line">## https://github.com/bitnami/charts/blob/master/bitnami/zookeeper/values.yaml</span><br><span class="line">##</span><br><span class="line">zookeeper:</span><br><span class="line">  ## @param zookeeper.enabled Switch to enable or disable the ZooKeeper helm chart</span><br><span class="line">  ##</span><br><span class="line">  enabled: true</span><br><span class="line">  ## @param zookeeper.replicaCount Number of ZooKeeper nodes</span><br><span class="line">  ##</span><br><span class="line">  replicaCount: 3</span><br><span class="line">  ## ZooKeeper authenticaiton</span><br><span class="line">  ##</span><br><span class="line">  auth:</span><br><span class="line">    ## @param zookeeper.auth.enabled Enable ZooKeeper auth</span><br><span class="line">    ##</span><br><span class="line">    enabled: false</span><br><span class="line">    ## @param zookeeper.auth.clientUser User that will use ZooKeeper clients to auth</span><br><span class="line">    ##</span><br><span class="line">    clientUser: &quot;&quot;</span><br><span class="line">    ## @param zookeeper.auth.clientPassword Password that will use ZooKeeper clients to auth</span><br><span class="line">    ##</span><br><span class="line">    clientPassword: &quot;&quot;</span><br><span class="line">    ## @param zookeeper.auth.serverUsers Comma, semicolon or whitespace separated list of user to be created. Specify them as a string, for example: &quot;user1,user2,admin&quot;</span><br><span class="line">    ##</span><br><span class="line">    serverUsers: &quot;&quot;</span><br><span class="line">    ## @param zookeeper.auth.serverPasswords Comma, semicolon or whitespace separated list of passwords to assign to users when created. Specify them as a string, for example: &quot;pass4user1, pass4user2, pass4admin&quot;</span><br><span class="line">    ##</span><br><span class="line">    serverPasswords: &quot;&quot;</span><br><span class="line">  ## ZooKeeper Persistence parameters</span><br><span class="line">  ## ref: https://kubernetes.io/docs/user-guide/persistent-volumes/</span><br><span class="line">  ## @param zookeeper.persistence.enabled Enable persistence on ZooKeeper using PVC(s)</span><br><span class="line">  ## @param zookeeper.persistence.storageClass Persistent Volume storage class</span><br><span class="line">  ## @param zookeeper.persistence.accessModes Persistent Volume access modes</span><br><span class="line">  ## @param zookeeper.persistence.size Persistent Volume size</span><br><span class="line">  ##</span><br><span class="line">  persistence:</span><br><span class="line">    enabled: true</span><br><span class="line">    storageClass: local-storage</span><br><span class="line">    accessModes:</span><br><span class="line">      - ReadWriteOnce</span><br><span class="line">    size: 5Gi</span><br><span class="line"></span><br><span class="line">## External Zookeeper Configuration</span><br><span class="line">## All of these values are only used if `zookeeper.enabled=false`</span><br><span class="line">##</span><br><span class="line">externalZookeeper:</span><br><span class="line">  ## @param externalZookeeper.servers List of external zookeeper servers to use</span><br><span class="line">  ##</span><br><span class="line">  servers: []</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用helm部署，需要在fetch的chart的解压目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(⎈ |minikube:default)➜  /Users/lintong/coding/helm/kafka git:(master) ✗ $ helm install kafka -f values.yaml .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看pv和pvc，已经是Bound状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pv,pvc -A</span><br><span class="line">NAME                                      CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                            STORAGECLASS    REASON   AGE</span><br><span class="line">persistentvolume/data-kafka-zookeeper-0   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-1   local-storage            10h</span><br><span class="line">persistentvolume/data-kafka-zookeeper-1   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-0   local-storage            10h</span><br><span class="line">persistentvolume/data-kafka-zookeeper-2   5Gi        RWO            Retain           Bound    default/data-kafka-zookeeper-2   local-storage            10h</span><br><span class="line">persistentvolume/datadir-kafka-0          5Gi        RWO            Retain           Bound    default/data-kafka-0             local-storage            10h</span><br><span class="line">persistentvolume/datadir-kafka-1          5Gi        RWO            Retain           Bound    default/data-kafka-1             local-storage            10h</span><br><span class="line">persistentvolume/datadir-kafka-2          5Gi        RWO            Retain           Bound    default/data-kafka-2             local-storage            10h</span><br><span class="line"></span><br><span class="line">NAMESPACE   NAME                                           STATUS   VOLUME                   CAPACITY   ACCESS MODES   STORAGECLASS    AGE</span><br><span class="line">default     persistentvolumeclaim/data-kafka-0             Bound    datadir-kafka-0          5Gi        RWO            local-storage   22m</span><br><span class="line">default     persistentvolumeclaim/data-kafka-1             Bound    datadir-kafka-1          5Gi        RWO            local-storage   22m</span><br><span class="line">default     persistentvolumeclaim/data-kafka-2             Bound    datadir-kafka-2          5Gi        RWO            local-storage   22m</span><br><span class="line">default     persistentvolumeclaim/data-kafka-zookeeper-0   Bound    data-kafka-zookeeper-1   5Gi        RWO            local-storage   10h</span><br><span class="line">default     persistentvolumeclaim/data-kafka-zookeeper-1   Bound    data-kafka-zookeeper-0   5Gi        RWO            local-storage   10h</span><br><span class="line">default     persistentvolumeclaim/data-kafka-zookeeper-2   Bound    data-kafka-zookeeper-2   5Gi        RWO            local-storage   10h</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看pod状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod -A</span><br><span class="line">NAMESPACE       NAME                                        READY   STATUS      RESTARTS   AGE</span><br><span class="line">default         kafka-0                                     1/1     Running     2          7m14s</span><br><span class="line">default         kafka-1                                     1/1     Running     3          7m14s</span><br><span class="line">default         kafka-2                                     1/1     Running     3          7m14s</span><br><span class="line">default         kafka-zookeeper-0                           1/1     Running     0          7m14s</span><br><span class="line">default         kafka-zookeeper-1                           1/1     Running     0          7m14s</span><br><span class="line">default         kafka-zookeeper-2                           1/1     Running     0          7m14s</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>　　</p>
<h2 id="4-lian-jie-kafka-ji-qun"><a href="#4-连接kafka集群" class="headerlink" title="4.连接kafka集群"></a>4.连接kafka集群<a href="#4-lian-jie-kafka-ji-qun" class="header-anchor">#</a></h2><p>查看service，可以看到kafka-0-external，kafka-1-external，kafka-2-external都是NodePort，所以可以使用minikube的ip来访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kubectl get service -A</span><br><span class="line">NAMESPACE       NAME                                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE</span><br><span class="line">default         kafka                                ClusterIP   10.101.193.49    &lt;none&gt;        9092/TCP                     11m</span><br><span class="line">default         kafka-0-external                     NodePort    10.107.22.127    &lt;none&gt;        9094:30001/TCP               11m</span><br><span class="line">default         kafka-1-external                     NodePort    10.106.222.15    &lt;none&gt;        9094:30002/TCP               11m</span><br><span class="line">default         kafka-2-external                     NodePort    10.111.166.28    &lt;none&gt;        9094:30003/TCP               11m</span><br><span class="line">default         kafka-headless                       ClusterIP   None             &lt;none&gt;        9092/TCP,9093/TCP            11m</span><br><span class="line">default         kafka-zookeeper                      ClusterIP   10.110.168.238   &lt;none&gt;        2181/TCP,2888/TCP,3888/TCP   11m</span><br><span class="line">default         kafka-zookeeper-headless             ClusterIP   None             &lt;none&gt;        2181/TCP,2888/TCP,3888/TCP   11m</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>minikube的ip</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(⎈ |minikube:default)➜  /Users/lintong $ minikube ip</span><br><span class="line">192.168.99.100</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用来offset explorer连接，成功连接</p>
<img src="/images/517519-20220714173144455-1673378660.png" width="800" height="138" loading="lazy">

<p>&nbsp;</p>

        <div class="article-entry">
          <div id="footer-info" class="inner">
          本文只发表于博客园和<a href="https://tonglin0325.github.io" target="_blank">tonglin0325的博客</a>，作者：tonglin0325，转载请注明原文链接：<a href="https://tonglin0325.github.io/%E5%9C%A8minikube%E4%B8%8B%E5%88%9B%E5%BB%BAkafka%E9%9B%86%E7%BE%A4.html">在minikube下创建kafka集群</a>
          </div>
        </div>
      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://tonglin0325.github.io/%E5%9C%A8minikube%E4%B8%8B%E5%88%9B%E5%BB%BAkafka%E9%9B%86%E7%BE%A4.html" data-id="cln8csfd40172l00lbkyp23di" class="article-share-link">
        <i class="fa fa-share"></i> 分享
      </a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kafka/" rel="tag">kafka</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/K8S%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%88%9B%E5%BB%BApv.html" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">K8S学习笔记——创建pv</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/Ubuntu16.04%E5%AE%89%E8%A3%85presto.html" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">Ubuntu16.04安装presto</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>




        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>tonglin0325</h4>
  <div style="text-align:center;"><img src="/images/WechatIMG1.jpeg" width="150" height="150" style="vertical-align:middle;"/></div>
</div>


  


  
  <div class="sidebar-module">
    <h4>标签</h4>
    <ul class="sidebar-module-list" itemprop="keywords"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Airbnb/" rel="tag">Airbnb</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Android/" rel="tag">Android</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/CDH/" rel="tag">CDH</a><span class="sidebar-module-list-count">11</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Doris/" rel="tag">Doris</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="sidebar-module-list-count">14</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Flink/" rel="tag">Flink</a><span class="sidebar-module-list-count">29</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Git/" rel="tag">Git</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Grafana/" rel="tag">Grafana</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/HAProxy/" rel="tag">HAProxy</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/HBase/" rel="tag">HBase</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hadoop/" rel="tag">Hadoop</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hive/" rel="tag">Hive</a><span class="sidebar-module-list-count">20</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hudi/" rel="tag">Hudi</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/InfluxDB/" rel="tag">InfluxDB</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JMeter/" rel="tag">JMeter</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Java/" rel="tag">Java</a><span class="sidebar-module-list-count">21</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/LaTex/" rel="tag">LaTex</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Linkedin/" rel="tag">Linkedin</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="sidebar-module-list-count">34</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ML/" rel="tag">ML</a><span class="sidebar-module-list-count">23</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ML-Infra/" rel="tag">ML Infra</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MPP/" rel="tag">MPP</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="sidebar-module-list-count">16</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Nexus/" rel="tag">Nexus</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/OpenTSDB/" rel="tag">OpenTSDB</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Paper/" rel="tag">Paper</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Play/" rel="tag">Play</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Prometheus/" rel="tag">Prometheus</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Python/" rel="tag">Python</a><span class="sidebar-module-list-count">21</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/React/" rel="tag">React</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/RocksDB/" rel="tag">RocksDB</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Scala/" rel="tag">Scala</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Solr/" rel="tag">Solr</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Spark/" rel="tag">Spark</a><span class="sidebar-module-list-count">26</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="sidebar-module-list-count">19</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="sidebar-module-list-count">14</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Thrift/" rel="tag">Thrift</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/YARN/" rel="tag">YARN</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/antlr/" rel="tag">antlr</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/arthas/" rel="tag">arthas</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/avro/" rel="tag">avro</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/cassandra/" rel="tag">cassandra</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/clickhouse/" rel="tag">clickhouse</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/confluent/" rel="tag">confluent</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/docker/" rel="tag">docker</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/filebeat/" rel="tag">filebeat</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/flume/" rel="tag">flume</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/golang/" rel="tag">golang</a><span class="sidebar-module-list-count">17</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/google/" rel="tag">google</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/gradle/" rel="tag">gradle</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/impala/" rel="tag">impala</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jenkins/" rel="tag">jenkins</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/k8s/" rel="tag">k8s</a><span class="sidebar-module-list-count">11</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/kafka/" rel="tag">kafka</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/kerberos/" rel="tag">kerberos</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/kudu/" rel="tag">kudu</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ldap/" rel="tag">ldap</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mac/" rel="tag">mac</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mongo/" rel="tag">mongo</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mybatis/" rel="tag">mybatis</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/nlp/" rel="tag">nlp</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/open-falcon/" rel="tag">open-falcon</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/openwrt/" rel="tag">openwrt</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/parquet/" rel="tag">parquet</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/presto/" rel="tag">presto</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ranger/" rel="tag">ranger</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/scyllaDB/" rel="tag">scyllaDB</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/twitter/" rel="tag">twitter</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/zookeeper/" rel="tag">zookeeper</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">刷题</a><span class="sidebar-module-list-count">22</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%9B%BE%E5%AD%98%E5%82%A8%E5%8F%8A%E8%AE%A1%E7%AE%97/" rel="tag">图存储及计算</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%B9%BF%E5%91%8A%E7%B3%BB%E7%BB%9F/" rel="tag">广告系统</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a><span class="sidebar-module-list-count">16</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="sidebar-module-list-count">18</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="sidebar-module-list-count">25</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" rel="tag">系统设计</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag">计算机基础</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="sidebar-module-list-count">5</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>标签云</h4>
    <p class="tagcloud">
      <a href="/tags/AWS/" style="font-size: 11.25px;">AWS</a> <a href="/tags/Airbnb/" style="font-size: 13.75px;">Airbnb</a> <a href="/tags/Android/" style="font-size: 11.25px;">Android</a> <a href="/tags/CDH/" style="font-size: 14.17px;">CDH</a> <a href="/tags/Doris/" style="font-size: 10px;">Doris</a> <a href="/tags/ELK/" style="font-size: 15px;">ELK</a> <a href="/tags/Flink/" style="font-size: 19.58px;">Flink</a> <a href="/tags/Git/" style="font-size: 10.42px;">Git</a> <a href="/tags/Grafana/" style="font-size: 10px;">Grafana</a> <a href="/tags/HAProxy/" style="font-size: 10.83px;">HAProxy</a> <a href="/tags/HBase/" style="font-size: 12.5px;">HBase</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Hive/" style="font-size: 17.08px;">Hive</a> <a href="/tags/Hudi/" style="font-size: 11.25px;">Hudi</a> <a href="/tags/InfluxDB/" style="font-size: 10px;">InfluxDB</a> <a href="/tags/JDBC/" style="font-size: 13.33px;">JDBC</a> <a href="/tags/JMeter/" style="font-size: 10px;">JMeter</a> <a href="/tags/JVM/" style="font-size: 11.67px;">JVM</a> <a href="/tags/Java/" style="font-size: 17.5px;">Java</a> <a href="/tags/LaTex/" style="font-size: 10px;">LaTex</a> <a href="/tags/Linkedin/" style="font-size: 10px;">Linkedin</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/ML/" style="font-size: 18.33px;">ML</a> <a href="/tags/ML-Infra/" style="font-size: 11.25px;">ML Infra</a> <a href="/tags/MPP/" style="font-size: 10px;">MPP</a> <a href="/tags/Maven/" style="font-size: 10.42px;">Maven</a> <a href="/tags/MySQL/" style="font-size: 15.42px;">MySQL</a> <a href="/tags/Nexus/" style="font-size: 11.67px;">Nexus</a> <a href="/tags/OpenTSDB/" style="font-size: 10.42px;">OpenTSDB</a> <a href="/tags/Paper/" style="font-size: 10px;">Paper</a> <a href="/tags/Play/" style="font-size: 10px;">Play</a> <a href="/tags/Prometheus/" style="font-size: 10.42px;">Prometheus</a> <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/React/" style="font-size: 10.42px;">React</a> <a href="/tags/Redis/" style="font-size: 10.83px;">Redis</a> <a href="/tags/RocksDB/" style="font-size: 10px;">RocksDB</a> <a href="/tags/Scala/" style="font-size: 13.75px;">Scala</a> <a href="/tags/Solr/" style="font-size: 10.83px;">Solr</a> <a href="/tags/Spark/" style="font-size: 19.17px;">Spark</a> <a href="/tags/SpringBoot/" style="font-size: 16.67px;">SpringBoot</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/Thrift/" style="font-size: 12.08px;">Thrift</a> <a href="/tags/YARN/" style="font-size: 11.67px;">YARN</a> <a href="/tags/antlr/" style="font-size: 10.42px;">antlr</a> <a href="/tags/arthas/" style="font-size: 10px;">arthas</a> <a href="/tags/avro/" style="font-size: 13.75px;">avro</a> <a href="/tags/cassandra/" style="font-size: 10px;">cassandra</a> <a href="/tags/clickhouse/" style="font-size: 10.42px;">clickhouse</a> <a href="/tags/confluent/" style="font-size: 10.42px;">confluent</a> <a href="/tags/docker/" style="font-size: 10.83px;">docker</a> <a href="/tags/filebeat/" style="font-size: 11.25px;">filebeat</a> <a href="/tags/flume/" style="font-size: 10.42px;">flume</a> <a href="/tags/golang/" style="font-size: 15.83px;">golang</a> <a href="/tags/google/" style="font-size: 12.92px;">google</a> <a href="/tags/gradle/" style="font-size: 10px;">gradle</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/impala/" style="font-size: 11.25px;">impala</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/k8s/" style="font-size: 14.17px;">k8s</a> <a href="/tags/kafka/" style="font-size: 14.58px;">kafka</a> <a href="/tags/kerberos/" style="font-size: 10px;">kerberos</a> <a href="/tags/kudu/" style="font-size: 10.42px;">kudu</a> <a href="/tags/ldap/" style="font-size: 10.42px;">ldap</a> <a href="/tags/mac/" style="font-size: 11.67px;">mac</a> <a href="/tags/mongo/" style="font-size: 11.67px;">mongo</a> <a href="/tags/mybatis/" style="font-size: 10.83px;">mybatis</a> <a href="/tags/nginx/" style="font-size: 12.08px;">nginx</a> <a href="/tags/nlp/" style="font-size: 10px;">nlp</a> <a href="/tags/open-falcon/" style="font-size: 10.83px;">open-falcon</a> <a href="/tags/openwrt/" style="font-size: 10px;">openwrt</a> <a href="/tags/parquet/" style="font-size: 10.83px;">parquet</a> <a href="/tags/presto/" style="font-size: 12.08px;">presto</a> <a href="/tags/ranger/" style="font-size: 10px;">ranger</a> <a href="/tags/scyllaDB/" style="font-size: 10.83px;">scyllaDB</a> <a href="/tags/twitter/" style="font-size: 10.42px;">twitter</a> <a href="/tags/zookeeper/" style="font-size: 14.58px;">zookeeper</a> <a href="/tags/%E5%88%B7%E9%A2%98/" style="font-size: 17.92px;">刷题</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 12.08px;">前端</a> <a href="/tags/%E5%9B%BE%E5%AD%98%E5%82%A8%E5%8F%8A%E8%AE%A1%E7%AE%97/" style="font-size: 10.42px;">图存储及计算</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 13.33px;">多线程</a> <a href="/tags/%E5%B9%BF%E5%91%8A%E7%B3%BB%E7%BB%9F/" style="font-size: 12.92px;">广告系统</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 15.42px;">开发工具</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 16.25px;">数据结构</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 13.33px;">杂谈</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18.75px;">算法</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" style="font-size: 10.83px;">系统设计</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 13.33px;">计算机基础</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 11.67px;">设计模式</a>
    </p>
  </div>



  
  <div class="sidebar-module">
    <h4>文章归档</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2025/03/">三月 2025</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2025/02/">二月 2025</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2024/10/">十月 2024</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2024/08/">八月 2024</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2024/05/">五月 2024</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2023/08/">八月 2023</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2022/07/">七月 2022</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2022/01/">一月 2022</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/12/">十二月 2021</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/11/">十一月 2021</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/09/">九月 2021</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/07/">七月 2021</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/05/">五月 2021</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/03/">三月 2021</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2021/01/">一月 2021</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/12/">十二月 2020</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/11/">十一月 2020</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/10/">十月 2020</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/09/">九月 2020</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/08/">八月 2020</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/07/">七月 2020</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/06/">六月 2020</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/05/">五月 2020</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/04/">四月 2020</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/03/">三月 2020</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/02/">二月 2020</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/01/">一月 2020</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/10/">十月 2019</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/09/">九月 2019</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/08/">八月 2019</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/07/">七月 2019</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/04/">四月 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/03/">三月 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2019/01/">一月 2019</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/12/">十二月 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/11/">十一月 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/09/">九月 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/06/">六月 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/05/">五月 2018</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/04/">四月 2018</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/02/">二月 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/01/">一月 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/11/">十一月 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/09/">九月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">七月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">六月 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/05/">五月 2017</a><span class="sidebar-module-list-count">13</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/04/">四月 2017</a><span class="sidebar-module-list-count">23</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/03/">三月 2017</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/01/">一月 2017</a><span class="sidebar-module-list-count">23</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/12/">十二月 2016</a><span class="sidebar-module-list-count">15</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">十一月 2016</a><span class="sidebar-module-list-count">21</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/09/">九月 2016</a><span class="sidebar-module-list-count">16</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/08/">八月 2016</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/07/">七月 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/06/">六月 2016</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/05/">五月 2016</a><span class="sidebar-module-list-count">32</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/04/">四月 2016</a><span class="sidebar-module-list-count">26</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/03/">三月 2016</a><span class="sidebar-module-list-count">134</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/02/">二月 2016</a><span class="sidebar-module-list-count">21</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/09/">九月 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/08/">八月 2015</a><span class="sidebar-module-list-count">14</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/07/">七月 2015</a><span class="sidebar-module-list-count">31</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/06/">六月 2015</a><span class="sidebar-module-list-count">26</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/04/">四月 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2013/04/">四月 2013</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>最近文章</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94gin%E9%99%90%E6%B5%81.html">go学习笔记——gin限流</a>
        </li>
      
        <li>
          <a href="/golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94gorm.html">golang学习笔记——gorm</a>
        </li>
      
        <li>
          <a href="/go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A1%86%E6%9E%B6DTM.html">go学习笔记——分布式事务框架DTM</a>
        </li>
      
        <li>
          <a href="/golang%E9%A1%B9%E7%9B%AE%E5%BC%95%E7%94%A8GitHub%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93module.html">golang项目引用GitHub私有仓库module</a>
        </li>
      
        <li>
          <a href="/k8s%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Istio%E5%92%8CKong.html">k8s学习笔记——Istio和Kong</a>
        </li>
      
    </ul>
  </div>




        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2025 tonglin0325<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9HZSXL1LDJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9HZSXL1LDJ');
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>



<script src="/js/jquery.qrcode.min.js"></script>



<script src="/js/jquery-1.9.0.min.js"></script>


</body>
</html>
